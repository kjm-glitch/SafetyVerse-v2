<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="logo.png?v=2">
    <title>Module 4: Emergency Action Plans - TheSafetyVerse</title>
    <style>
        /* ═══════════════════════════════════════════
           CSS VARIABLES & RESET
           ═══════════════════════════════════════════ */
        :root {
            --primary: #FFD700;
            --primary-dark: #E6C200;
            --secondary: #FF8C00;
            --secondary-dark: #E67A00;
            --bg-clay: #F5E6D3;
            --bg-clay-dark: #E8D5C0;
            --bg-clay-light: #FAF0E6;
            --text-dark: #333333;
            --text-medium: #555555;
            --text-light: #777777;
            --accent-black: #1A1A1A;
            --white: #FFFFFF;
            --success: #4CAF50;
            --success-dark: #388E3C;
            --error: #E53935;
            --error-dark: #C62828;
            --info: #2196F3;
            --shadow-soft: 0 4px 15px rgba(0,0,0,0.1);
            --shadow-medium: 0 6px 25px rgba(0,0,0,0.15);
            --shadow-hard: 0 8px 30px rgba(0,0,0,0.2);
            --shadow-clay: 4px 4px 0px rgba(0,0,0,0.15), inset 0 2px 4px rgba(255,255,255,0.3);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 28px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --font-heading: 'Segoe UI', 'Arial Black', sans-serif;
            --font-body: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-clay);
            color: var(--text-dark);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(139,90,43,0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139,90,43,0.02) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(139,90,43,0.03) 0%, transparent 50%);
        }

        /* ═══ HEADER ═══ */
        .header {
            background: linear-gradient(180deg, var(--accent-black) 0%, #2A2A2A 100%);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-bottom: 4px solid var(--primary);
            z-index: 100;
            flex-shrink: 0;
        }
        .header-inner {
            max-width: 1400px; margin: 0 auto; padding: 0 24px;
            display: flex; align-items: center; justify-content: space-between; height: 64px;
        }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; flex-shrink: 0; }
        .logo-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .logo-icon img {
            display: block;
            height: 50px;
            width: auto;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.15);
            border-radius: 12px;
            transition: transform 0.2s ease;
        }
        .logo-text { font-family: var(--font-heading); font-size: 22px; font-weight: 900; color: var(--white); letter-spacing: -0.5px; }
        .logo-text em { color: var(--primary); font-style: normal; }
        .header-center { display: flex; align-items: center; gap: 10px; position: absolute; left: 50%; transform: translateX(-50%); }
        .header-module-tag { background: rgba(255,215,0,0.15); color: var(--primary); font-size: 11px; font-weight: 800; padding: 3px 10px; border-radius: 12px; text-transform: uppercase; letter-spacing: 0.8px; }
        .header-module-title { color: rgba(255,255,255,0.8); font-size: 14px; font-weight: 600; }
        .back-btn { display: flex; align-items: center; gap: 6px; text-decoration: none; color: rgba(255,255,255,0.7); font-size: 13px; font-weight: 600; padding: 7px 14px; border-radius: var(--radius-sm); transition: var(--transition); background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); }
        .back-btn:hover { color: var(--white); background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.2); }

        /* ═══ PROGRESS BAR ═══ */
        .progress-bar { background: var(--accent-black); border-bottom: 1px solid rgba(255,215,0,0.15); flex-shrink: 0; z-index: 99; }
        .progress-bar-inner { max-width: 1400px; margin: 0 auto; padding: 8px 24px; display: flex; align-items: center; gap: 14px; }
        .progress-label { font-size: 12px; font-weight: 700; color: rgba(255,255,255,0.5); white-space: nowrap; min-width: 90px; }
        .progress-track { flex: 1; height: 6px; background: rgba(255,255,255,0.08); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 3px; transition: width 0.4s ease; }
        .progress-pct { font-size: 12px; font-weight: 700; color: var(--primary); white-space: nowrap; min-width: 32px; text-align: right; }

        /* ═══ SLIDE VIEWPORT ═══ */
        .slide-viewport { flex: 1; position: relative; overflow: hidden; }
        .slide { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; padding: 24px; opacity: 0; visibility: hidden; transition: opacity 0.4s ease, transform 0.4s ease; transform: translateX(40px); overflow-y: auto; }
        .slide.active { opacity: 1; visibility: visible; transform: translateX(0); z-index: 2; }
        .slide.exit-left { opacity: 0; transform: translateX(-40px); }

        /* ═══ SLIDE CARD ═══ */
        .slide-card { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-hard); width: 100%; max-width: 860px; position: relative; display: flex; flex-direction: column; }
        .slide-card-body { padding: 36px 40px 32px; flex: 1; overflow-y: auto; max-height: calc(100vh - 220px); }
        .slide-badge { display: inline-block; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: var(--accent-black); font-size: 11px; font-weight: 800; padding: 4px 14px; border-radius: 20px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 18px; }
        .slide-heading { display: flex; align-items: center; gap: 16px; margin-bottom: 22px; }
        .slide-icon { width: 54px; height: 54px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 28px; flex-shrink: 0; box-shadow: var(--shadow-clay); }
        .slide-icon.blue { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); }
        .slide-icon.green { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); }
        .slide-icon.orange { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); }
        .slide-icon.red { background: linear-gradient(135deg, #FFEBEE, #FFCDD2); }
        .slide-icon.purple { background: linear-gradient(135deg, #F3E5F5, #E1BEE7); }
        .slide-icon.yellow { background: linear-gradient(135deg, #FFFDE7, #FFF9C4); }
        .slide-icon.teal { background: linear-gradient(135deg, #E0F2F1, #B2DFDB); }
        .slide-icon.gold { background: linear-gradient(135deg, #FFF8E1, #FFE082); }
        .slide-title { font-family: var(--font-heading); font-size: 26px; font-weight: 900; color: var(--text-dark); line-height: 1.2; }
        .slide-text { font-size: 16px; color: var(--text-medium); line-height: 1.7; }
        .slide-text p { margin-bottom: 14px; }
        .slide-text strong { color: var(--text-dark); }
        .slide-text h4 { font-size: 16px; font-weight: 800; color: var(--text-dark); margin: 18px 0 6px; }

        /* ═══ LISTS ═══ */
        .check-list { list-style: none; margin: 16px 0; }
        .check-list li { padding: 9px 0 9px 36px; position: relative; font-size: 15px; color: var(--text-medium); line-height: 1.55; }
        .check-list li::before { content: '\2713'; position: absolute; left: 0; top: 9px; width: 24px; height: 24px; background: #E8F5E9; color: var(--success); font-weight: 900; font-size: 13px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .x-list { list-style: none; margin: 16px 0; }
        .x-list li { padding: 9px 0 9px 36px; position: relative; font-size: 15px; color: var(--text-medium); line-height: 1.55; }
        .x-list li::before { content: '\2717'; position: absolute; left: 0; top: 9px; width: 24px; height: 24px; background: #FFEBEE; color: var(--error); font-weight: 900; font-size: 12px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .num-list { list-style: none; margin: 16px 0; counter-reset: numlist; }
        .num-list li { padding: 9px 0 9px 36px; position: relative; font-size: 15px; color: var(--text-medium); line-height: 1.55; counter-increment: numlist; }
        .num-list li::before { content: counter(numlist); position: absolute; left: 0; top: 9px; width: 24px; height: 24px; background: #E3F2FD; color: var(--info); font-weight: 800; font-size: 12px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .icon-list { list-style: none; margin: 16px 0; }
        .icon-list li { padding: 9px 0 9px 36px; position: relative; font-size: 15px; color: var(--text-medium); line-height: 1.55; }
        .icon-list li .li-icon { position: absolute; left: 2px; top: 10px; font-size: 16px; }

        /* ═══ CALLOUTS ═══ */
        .callout { border-radius: var(--radius-sm); padding: 16px 20px; margin: 18px 0; font-size: 15px; line-height: 1.6; }
        .callout.gold { background: linear-gradient(135deg, #FFFDE7, #FFF9C4); border-left: 4px solid var(--primary); }
        .callout.orange { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); border-left: 4px solid var(--secondary); }
        .callout.blue { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); border-left: 4px solid var(--info); }
        .callout.green { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); border-left: 4px solid var(--success); }
        .callout.red { background: linear-gradient(135deg, #FFEBEE, #FFCDD2); border-left: 4px solid var(--error); }
        .stat-badge { display: inline-flex; align-items: center; gap: 8px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: var(--accent-black); padding: 10px 22px; border-radius: 28px; font-weight: 800; font-size: 15px; box-shadow: var(--shadow-clay); margin-top: 6px; }

        /* ═══ KATIE TIP ═══ */
        .katie-tip { display: flex; gap: 14px; align-items: flex-start; background: linear-gradient(135deg, #FFFDE7, #FFF9C4); border: 2px solid var(--primary); border-radius: var(--radius-md); padding: 16px 18px; margin-top: 22px; }
        .katie-avatar { width: 48px; height: auto; border-radius: 10px; border: 2px solid var(--primary); object-fit: contain; background: #fff; padding: 3px; flex-shrink: 0; box-shadow: 2px 2px 0px rgba(0,0,0,0.1); }
        .katie-tip-body { flex: 1; }
        .katie-tip-label { font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 1.2px; color: var(--secondary-dark); margin-bottom: 3px; }
        .katie-tip-msg { font-size: 14px; color: var(--text-dark); font-style: italic; line-height: 1.5; }

        /* ═══ TAKEAWAY ═══ */
        .takeaway-grid { display: grid; gap: 12px; margin-top: 18px; }
        .takeaway-item { display: flex; align-items: center; gap: 14px; background: var(--bg-clay-light); border-radius: var(--radius-md); padding: 16px 20px; border-left: 4px solid var(--primary); transition: var(--transition); }
        .takeaway-item:hover { transform: translateX(4px); box-shadow: var(--shadow-soft); }
        .takeaway-icon { font-size: 22px; flex-shrink: 0; }
        .takeaway-text { font-size: 15px; font-weight: 600; color: var(--text-dark); }

        /* ═══ TWO-SECTIONS ═══ */
        .two-sections { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 16px 0; }
        .two-sections .section-block h4 { font-size: 14px; font-weight: 800; color: var(--text-dark); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }

        /* ═══ COMPARE GRID ═══ */
        .compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 16px 0; }
        .compare-card { border-radius: var(--radius-md); padding: 20px; }
        .compare-card.evacuate { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); border: 2px solid var(--secondary); }
        .compare-card.shelter { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); border: 2px solid var(--info); }
        .compare-card h4 { font-size: 15px; font-weight: 800; color: var(--text-dark); margin-bottom: 10px; }
        .compare-card ul { list-style: none; margin: 0; }
        .compare-card ul li { padding: 5px 0 5px 24px; position: relative; font-size: 14px; color: var(--text-medium); line-height: 1.5; }
        .compare-card ul li .li-icon { position: absolute; left: 0; top: 6px; font-size: 14px; }

        /* ═══ ROLE CARD ═══ */
        .role-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin: 16px 0; }
        .role-card { background: var(--bg-clay-light); border-radius: var(--radius-md); padding: 16px; border-left: 4px solid var(--primary); }
        .role-card h5 { font-size: 14px; font-weight: 800; color: var(--text-dark); margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
        .role-card p { font-size: 13px; color: var(--text-medium); line-height: 1.5; }

        /* ═══ INTRO CARD (SLIDE 1) ═══ */
        .intro-card { background: linear-gradient(135deg, var(--accent-black) 0%, #2A2A2A 50%, #333 100%); color: var(--white); border-radius: var(--radius-xl); max-width: 860px; width: 100%; padding: 50px; position: relative; overflow: hidden; box-shadow: var(--shadow-hard); }
        .intro-card::before { content: ''; position: absolute; top: -40%; right: -15%; width: 450px; height: 450px; background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 65%); pointer-events: none; }
        .intro-card::after { content: ''; position: absolute; bottom: -30%; left: -10%; width: 300px; height: 300px; background: radial-gradient(circle, rgba(255,140,0,0.06) 0%, transparent 65%); pointer-events: none; }
        .intro-badge { display: inline-block; background: var(--primary); color: var(--accent-black); font-size: 11px; font-weight: 800; padding: 5px 16px; border-radius: 20px; text-transform: uppercase; letter-spacing: 1.2px; margin-bottom: 24px; }
        .intro-path-tag { display: inline-block; background: rgba(255,215,0,0.12); color: var(--primary); font-size: 11px; font-weight: 700; padding: 4px 12px; border-radius: 14px; margin-bottom: 14px; margin-left: 8px; }
        .intro-card h1 { font-family: var(--font-heading); font-size: 38px; font-weight: 900; line-height: 1.15; margin-bottom: 14px; }
        .intro-card h1 em { color: var(--primary); font-style: normal; }
        .intro-desc { color: rgba(255,255,255,0.65); font-size: 17px; max-width: 520px; line-height: 1.6; margin-bottom: 28px; }
        .intro-meta { display: flex; gap: 24px; margin-bottom: 36px; flex-wrap: wrap; }
        .intro-meta-item { display: flex; align-items: center; gap: 8px; color: rgba(255,255,255,0.5); font-size: 14px; font-weight: 600; }
        .intro-meta-item span { font-size: 20px; }
        .intro-start-btn { display: inline-flex; align-items: center; gap: 10px; padding: 16px 40px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: var(--accent-black); font-size: 16px; font-weight: 800; border: none; border-radius: var(--radius-md); cursor: pointer; transition: var(--transition); box-shadow: var(--shadow-clay); letter-spacing: 0.3px; }
        .intro-start-btn:hover { transform: translateY(-3px) scale(1.02); box-shadow: 0 8px 30px rgba(255,215,0,0.3); }
        .intro-katie { position: absolute; right: 40px; bottom: 30px; width: 140px; height: auto; border-radius: 12px; border: 4px solid var(--primary); object-fit: contain; background: #fff; padding: 8px; box-shadow: 0 6px 30px rgba(0,0,0,0.4); opacity: 0.95; }

        /* ═══ VIDEO CARD (SLIDE 2) ═══ */
        .video-wrap { width: 100%; max-width: 860px; }
        .video-card { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-hard); overflow: hidden; }
        .video-card-header { padding: 24px 32px 0; }
        .video-card-header h2 { font-family: var(--font-heading); font-size: 22px; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .video-card-header p { color: var(--text-light); font-size: 14px; margin-top: 4px; }
        .video-player-area { margin: 20px 32px; background: linear-gradient(135deg, #111, #222); border-radius: var(--radius-md); aspect-ratio: 16/9; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; overflow: hidden; }
        .video-player-area::before { content: ''; position: absolute; inset: 0; background: repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,0.015) 10px,rgba(255,255,255,0.015) 20px); pointer-events: none; }
        .video-play-btn { width: 72px; height: 72px; border-radius: 50%; background: rgba(255,215,0,0.15); border: 3px solid var(--primary); display: flex; align-items: center; justify-content: center; font-size: 30px; margin-bottom: 14px; color: var(--primary); }
        .video-player-area h3 { color: var(--white); font-size: 17px; margin-bottom: 6px; }
        .video-player-area p { color: rgba(255,255,255,0.4); font-size: 13px; }
        .video-card-footer { padding: 16px 32px 24px; display: flex; align-items: center; justify-content: space-between; }
        .mark-watched-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 18px; border: 2px solid rgba(0,0,0,0.1); background: var(--bg-clay-light); color: var(--text-light); border-radius: var(--radius-sm); font-size: 13px; font-weight: 600; cursor: not-allowed; opacity: 0.5; }

        /* ═══ QUIZ ═══ */
        .quiz-card { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-hard); border: 2px solid var(--primary); width: 100%; max-width: 860px; overflow: hidden; }
        .quiz-card-header { background: linear-gradient(135deg, var(--accent-black), #2A2A2A); padding: 20px 32px; display: flex; align-items: center; justify-content: space-between; }
        .quiz-card-header h2 { font-family: var(--font-heading); font-size: 18px; font-weight: 800; color: var(--white); display: flex; align-items: center; gap: 8px; }
        .quiz-progress-badge { background: rgba(255,215,0,0.15); color: var(--primary); font-size: 12px; font-weight: 700; padding: 4px 12px; border-radius: 14px; }
        .quiz-card-body { padding: 36px 40px; }
        .quiz-question-text { font-size: 19px; font-weight: 700; color: var(--text-dark); margin-bottom: 24px; line-height: 1.45; }
        .quiz-options { display: grid; gap: 10px; }
        .quiz-option { display: flex; align-items: center; gap: 14px; padding: 15px 20px; border: 2px solid rgba(0,0,0,0.09); border-radius: var(--radius-md); cursor: pointer; transition: var(--transition); background: var(--bg-clay-light); font-size: 15px; color: var(--text-dark); }
        .quiz-option:hover:not(.disabled) { border-color: var(--primary); background: #FFFDE7; }
        .quiz-option.selected { border-color: var(--primary); background: #FFFDE7; font-weight: 600; }
        .quiz-option.correct { border-color: var(--success); background: #E8F5E9; }
        .quiz-option.incorrect { border-color: var(--error); background: #FFEBEE; }
        .quiz-option.disabled { cursor: default; }
        .quiz-option.disabled:not(.correct):not(.selected) { opacity: 0.5; }
        .quiz-option-letter { width: 34px; height: 34px; border-radius: 50%; background: rgba(0,0,0,0.06); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 14px; flex-shrink: 0; transition: var(--transition); }
        .quiz-option.selected .quiz-option-letter { background: var(--primary); color: var(--accent-black); }
        .quiz-option.correct .quiz-option-letter { background: var(--success); color: var(--white); }
        .quiz-option.incorrect .quiz-option-letter { background: var(--error); color: var(--white); }
        .quiz-feedback { margin-top: 16px; padding: 14px 18px; border-radius: var(--radius-sm); font-size: 14px; font-weight: 600; display: none; line-height: 1.5; }
        .quiz-feedback.show { display: block; }
        .quiz-feedback.correct-fb { background: #E8F5E9; color: #2E7D32; border: 1px solid #C8E6C9; }
        .quiz-feedback.incorrect-fb { background: #FFEBEE; color: #C62828; border: 1px solid #FFCDD2; }
        .quiz-card-actions { padding: 0 40px 32px; display: flex; gap: 12px; }

        /* ═══ RESULTS ═══ */
        .results-card { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-hard); width: 100%; max-width: 860px; text-align: center; overflow: hidden; }
        .results-header { background: linear-gradient(135deg, var(--accent-black), #2A2A2A); padding: 20px 32px; }
        .results-header h2 { font-family: var(--font-heading); font-size: 18px; font-weight: 800; color: var(--white); }
        .results-body { padding: 40px; }
        .results-icon { font-size: 60px; margin-bottom: 12px; }
        .results-score { font-family: var(--font-heading); font-size: 48px; font-weight: 900; color: var(--primary-dark); margin-bottom: 8px; }
        .results-title { font-family: var(--font-heading); font-size: 24px; font-weight: 800; margin-bottom: 8px; }
        .results-msg { color: var(--text-medium); font-size: 16px; max-width: 450px; margin: 0 auto 10px; line-height: 1.5; }
        .results-btns { display: flex; gap: 14px; justify-content: center; margin-top: 28px; flex-wrap: wrap; }
        .results-katie { margin-top: 28px; padding-top: 24px; border-top: 2px dashed rgba(0,0,0,0.06); display: flex; align-items: center; gap: 14px; justify-content: center; }
        .results-katie img { width: 50px; height: auto; border-radius: 12px; border: 2px solid var(--primary); object-fit: contain; background: #fff; padding: 3px; }
        .results-katie p { font-style: italic; font-size: 15px; color: var(--text-medium); text-align: left; }

        /* ═══ BUTTONS ═══ */
        .btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 28px; border-radius: var(--radius-sm); font-size: 14px; font-weight: 700; cursor: pointer; transition: var(--transition); border: none; text-decoration: none; }
        .btn-gold { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: var(--accent-black); box-shadow: var(--shadow-clay); }
        .btn-gold:hover { transform: translateY(-2px); box-shadow: var(--shadow-medium); }
        .btn-gold:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
        .btn-dark { background: var(--accent-black); color: var(--white); }
        .btn-dark:hover { background: #333; transform: translateY(-1px); }
        .btn-outline { background: var(--white); color: var(--text-dark); border: 2px solid rgba(0,0,0,0.12); }
        .btn-outline:hover { border-color: var(--primary); background: #FFFDE7; }
        .btn-success { background: var(--success); color: var(--white); }
        .btn-success:hover { background: var(--success-dark); transform: translateY(-2px); }

        /* ═══ BOTTOM NAV ═══ */
        .bottom-nav { background: var(--white); border-top: 1px solid rgba(0,0,0,0.08); box-shadow: 0 -2px 10px rgba(0,0,0,0.05); flex-shrink: 0; z-index: 100; }
        .bottom-nav-inner { max-width: 1400px; margin: 0 auto; padding: 12px 24px; display: flex; align-items: center; justify-content: space-between; }
        .nav-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 24px; border-radius: var(--radius-sm); font-size: 14px; font-weight: 700; cursor: pointer; transition: var(--transition); border: 2px solid rgba(0,0,0,0.1); background: var(--white); color: var(--text-dark); }
        .nav-btn:hover:not(:disabled) { border-color: var(--primary); background: #FFFDE7; }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-btn.next-btn { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: var(--accent-black); border: none; box-shadow: var(--shadow-clay); }
        .nav-btn.next-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: var(--shadow-medium); }
        .nav-slide-info { font-size: 13px; font-weight: 700; color: var(--text-light); }
        .kbd-hints { display: flex; gap: 12px; align-items: center; }
        .kbd-hint { font-size: 11px; color: var(--text-light); display: flex; align-items: center; gap: 4px; }
        .kbd { display: inline-block; background: var(--bg-clay); border: 1px solid rgba(0,0,0,0.12); border-radius: 4px; padding: 1px 6px; font-size: 10px; font-weight: 700; font-family: monospace; }

        /* ═══ RESPONSIVE ═══ */
        @media (max-width: 768px) {
            .header-inner { height: 56px; padding: 0 16px; }
            .header-center { display: none; }
            .logo-text { font-size: 19px; }
            .back-btn { padding: 6px 10px; font-size: 12px; }
            .progress-bar-inner { padding: 6px 16px; }
            .slide { padding: 16px; }
            .slide-card-body { padding: 24px 20px 20px; max-height: calc(100vh - 200px); }
            .slide-title { font-size: 22px; }
            .intro-card { padding: 32px 24px; }
            .intro-card h1 { font-size: 28px; }
            .intro-katie { width: 90px; height: auto; right: 20px; bottom: 20px; }
            .intro-desc { font-size: 15px; }
            .two-sections { grid-template-columns: 1fr; }
            .compare-grid { grid-template-columns: 1fr; }
            .role-grid { grid-template-columns: 1fr; }
            .quiz-card-body { padding: 24px 20px; }
            .quiz-card-actions { padding: 0 20px 24px; }
            .quiz-question-text { font-size: 17px; }
            .results-body { padding: 28px 20px; }
            .video-card-header { padding: 20px 20px 0; }
            .video-player-area { margin: 16px 20px; }
            .video-card-footer { padding: 12px 20px 20px; flex-direction: column; gap: 10px; }
            .bottom-nav-inner { padding: 10px 16px; }
            .kbd-hints { display: none; }
            .nav-btn { padding: 10px 16px; font-size: 13px; }
        }
        @media (max-width: 480px) {
            .intro-card h1 { font-size: 24px; }
            .intro-katie { display: none; }
            .intro-meta { gap: 14px; }
            .intro-start-btn { padding: 14px 28px; font-size: 15px; }
            .slide-heading { flex-direction: column; align-items: flex-start; gap: 10px; }
            .katie-tip { flex-direction: column; text-align: center; align-items: center; }
        }

        /* ═══ NEXT SLIDE BUTTON ═══ */
        .next-slide-button {
            display: inline-block;
            background: #FFD700;
            color: #000;
            padding: 16px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        .next-slide-button:hover {
            background: #E6C200;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        .character-avatar {
            width: 60px; height: auto;
            border-radius: 10px;
            border: 3px solid #FFD700;
            object-fit: contain; background: #fff; padding: 4px;
        }

        /* Katie Circular Avatar Styles */
        .katie-avatar-small {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            background: white;
            border: 3px solid #FFD700;
            padding: 5px;
            display: block;
            flex-shrink: 0;
        }
        .katie-avatar-medium {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            background: white;
            border: 3px solid #FFD700;
            padding: 8px;
            display: block;
            flex-shrink: 0;
        }
        .katie-avatar-large {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            background: white;
            border: 4px solid #FFD700;
            padding: 10px;
            display: block;
            flex-shrink: 0;
        }
    </style>
</head>
<body>

    <!-- ═══ HEADER ═══ -->
    <header class="header" role="banner">
        <div class="header-inner">
            <a href="../../user-dashboard/index.html" class="logo" aria-label="TheSafetyVerse Home">
                <div class="logo-icon" aria-hidden="true"><img src="logo.png?v=2" alt="TheSafetyVerse Logo" style="height: 50px; width: auto;"></div>
                <div class="logo-text"><em>The</em>Safety<em>Verse</em></div>
            </a>
            <div class="header-center">
                <span class="header-module-tag">Module 4</span>
                <span class="header-module-title">Emergency Action Plans</span>
            </div>
            <a href="../../user-dashboard/index.html" class="back-btn">&#8592; Back to Dashboard</a>
        </div>
    </header>

    <!-- ═══ PROGRESS BAR ═══ -->
    <div class="progress-bar" role="navigation" aria-label="Lesson progress">
        <div class="progress-bar-inner">
            <span class="progress-label" id="progressLabel">Slide 1 of 15</span>
            <div class="progress-track" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <span class="progress-pct" id="progressPct">7%</span>
        </div>
    </div>

    <!-- ═══ SLIDE VIEWPORT ═══ -->
    <div class="slide-viewport">

        <!-- ══════════════════════════════════════════
             SLIDE 1: INTRO
             ══════════════════════════════════════════ -->
        <div class="slide active" data-slide="1">
            <div class="intro-card">
                <span class="intro-badge">Module 4 of 19</span>
                <span class="intro-path-tag">Foundation Path</span>
                <h1>Emergency <em>Action Plans</em></h1>
                <p style="color:rgba(255,255,255,0.5); font-size:15px; font-weight:700; margin-bottom:10px;">Be Prepared, Stay Safe</p>
                <p class="intro-desc">Learn your facility's emergency procedures for fires, severe weather, medical emergencies, and more. Know what to do, where to go, and how to stay safe when every second counts.</p>
                <div class="intro-meta">
                    <div class="intro-meta-item"><span>&#128218;</span> 8 Content Slides</div>
                    <div class="intro-meta-item"><span>&#10067;</span> 3 Quiz Questions</div>
                    <div class="intro-meta-item"><span>&#9201;</span> ~10 min</div>
                </div>
                <button class="intro-start-btn" onclick="goToSlide(2)">Start Module &#8594;</button>
                <img src="katie.png" alt="Katie" class="katie-avatar-large">
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 2: VIDEO
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="2">
            <div class="video-wrap">
                <div class="video-card">
                    <div class="video-card-header">
                        <h2>&#127909; Emergency Action Plans: Know Your Plan</h2>
                        <p>Watch this 3-minute overview of emergency procedures and why they matter</p>
                    </div>
                    <div class="video-player-area">
                        <div class="video-play-btn" aria-hidden="true">&#9654;</div>
                        <h3>Video Coming Soon</h3>
                        <p>Emergency action plans overview video in development</p>
                    </div>
                    <div class="video-card-footer">
                        <span class="mark-watched-btn">&#9744; Mark as Watched</span>
                        <button class="btn btn-gold" onclick="goToSlide(3)">Next: Begin Lesson &#8594;</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 3: What is an EAP?
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="3">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 1 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon red" aria-hidden="true">&#128680;</div>
                        <h2 class="slide-title">What is an Emergency Action Plan?</h2>
                    </div>
                    <div class="slide-text">
                        <div class="callout blue">
                            <strong>An Emergency Action Plan (EAP)</strong> is a written document that describes the actions employees should take to ensure their safety during workplace emergencies.
                        </div>
                        <p><strong>Key Points:</strong></p>
                        <ul class="check-list">
                            <li>Required by OSHA for most workplaces</li>
                            <li>Covers fires, severe weather, medical emergencies, chemical spills, violence, and more</li>
                            <li>Must be specific to YOUR workplace</li>
                            <li>Should be reviewed at least annually</li>
                            <li>Must be available to all employees</li>
                        </ul>
                        <h4>What an EAP Includes:</h4>
                        <ul class="check-list">
                            <li>Emergency escape procedures and routes</li>
                            <li>Procedures for employees who stay to operate critical equipment</li>
                            <li>Procedures to account for all employees after evacuation</li>
                            <li>Rescue and medical duties for designated employees</li>
                            <li>How to report fires and other emergencies</li>
                            <li>Names and contact info for emergency personnel</li>
                        </ul>
                        <div class="callout gold">
                            <strong>&#9888;&#65039; "In an emergency, panic is the enemy. Having a plan means everyone knows what to do &mdash; no confusion, no hesitation."</strong>
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Your EAP isn't just a document &mdash; it's your life-saving playbook. Know it before you need it!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(4)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 4: Types of Workplace Emergencies
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="4">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 2 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon orange" aria-hidden="true">&#9888;&#65039;</div>
                        <h2 class="slide-title">Types of Workplace Emergencies</h2>
                    </div>
                    <div class="slide-text">
                        <div class="two-sections">
                            <div class="section-block">
                                <h4>&#128293; Fire Emergencies</h4>
                                <ul class="check-list">
                                    <li>Building fires</li>
                                    <li>Electrical fires</li>
                                    <li>Chemical fires</li>
                                    <li>Wildfire approaching facility</li>
                                </ul>
                                <h4>&#127973; Medical Emergencies</h4>
                                <ul class="check-list">
                                    <li>Heart attack, stroke</li>
                                    <li>Severe injuries</li>
                                    <li>Allergic reactions</li>
                                    <li>Heat stroke, hypothermia</li>
                                </ul>
                            </div>
                            <div class="section-block">
                                <h4>&#127786; Natural Disasters</h4>
                                <ul class="check-list">
                                    <li>Tornadoes and severe thunderstorms</li>
                                    <li>Earthquakes</li>
                                    <li>Floods and winter storms</li>
                                </ul>
                                <h4>&#128680; Other Emergencies</h4>
                                <ul class="check-list">
                                    <li>Chemical spills or releases</li>
                                    <li>Gas leaks and bomb threats</li>
                                    <li>Active shooter / workplace violence</li>
                                    <li>Power outages and structural failure</li>
                                </ul>
                            </div>
                        </div>
                        <div class="callout red">
                            <strong>Each Emergency Type Requires:</strong><br>
                            &#10003; Different response procedures &bull; &#10003; Specific evacuation or shelter decisions<br>
                            &#10003; Designated roles and responsibilities &bull; &#10003; Communication protocols
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Different emergencies need different responses. Fire = evacuate. Tornado = shelter in place. Know the difference!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(5)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 5: Evacuation Procedures
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="5">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 3 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon green" aria-hidden="true">&#128682;</div>
                        <h2 class="slide-title">Evacuation Procedures</h2>
                    </div>
                    <div class="slide-text">
                        <div class="callout red">
                            <strong>&#128680; When the Alarm Sounds &mdash; ACT IMMEDIATELY!</strong>
                        </div>
                        <ol class="num-list">
                            <li><strong>Stop Work Immediately</strong> &mdash; Don't finish what you're doing. Don't gather belongings. React now.</li>
                            <li><strong>Exit the Building</strong> &mdash; Use nearest safe exit. Walk quickly but DON'T RUN. Use stairs &mdash; NEVER elevators. Close doors behind you.</li>
                            <li><strong>Go to Assembly Point</strong> &mdash; Specific outdoor location, minimum 500 feet from building. Stay there until all-clear.</li>
                            <li><strong>Report for Accountability</strong> &mdash; Check in with your supervisor or accountability coordinator. Report missing persons.</li>
                            <li><strong>Wait for All-Clear</strong> &mdash; Do NOT re-enter the building. Follow instructions from emergency personnel.</li>
                        </ol>
                        <h4>Critical Rules:</h4>
                        <ul class="x-list">
                            <li>Never use elevators during evacuation</li>
                            <li>Don't go back for belongings</li>
                            <li>Don't leave the assembly point</li>
                            <li>Don't re-enter building until all-clear</li>
                        </ul>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Get out, stay out, call out! That's the evacuation mantra. Your stuff can be replaced &mdash; you can't."</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(6)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 6: Assembly Points & Accountability
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="6">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 4 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon blue" aria-hidden="true">&#128205;</div>
                        <h2 class="slide-title">Assembly Points &amp; Accountability</h2>
                    </div>
                    <div class="slide-text">
                        <div class="callout blue">
                            <strong>What is an Assembly Point?</strong> A designated outdoor location where all employees gather after evacuating the building.
                        </div>
                        <h4>Assembly Point Requirements:</h4>
                        <ul class="check-list">
                            <li>At least 500 feet from building</li>
                            <li>Away from emergency vehicle access routes</li>
                            <li>Weather shelter available if possible</li>
                            <li>Clearly marked and communicated</li>
                            <li>Large enough for all employees</li>
                        </ul>
                        <h4>Accountability Process:</h4>
                        <ol class="num-list">
                            <li><strong>Report to Your Assembly Point</strong> &mdash; Go directly there. Don't go to your car. Stay together as a team.</li>
                            <li><strong>Check In</strong> &mdash; Supervisor or accountability coordinator takes roll call. Report if you know anyone is missing.</li>
                            <li><strong>Communicate</strong> &mdash; Report injuries immediately. Share any important information with the emergency coordinator.</li>
                            <li><strong>Stay Put</strong> &mdash; Don't leave for any reason. Don't re-enter the building. Don't move unless instructed.</li>
                        </ol>
                        <div class="callout green">
                            <strong>Why Accountability Matters:</strong><br>
                            &#10003; Emergency responders know if anyone is still inside<br>
                            &#10003; Medical help can be directed to injured<br>
                            &#10003; Company knows all employees are safe<br>
                            &#10003; Required by OSHA
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"In an emergency, we're all accountable for each other. Your supervisor needs to know you're safe!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(7)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 7: Evacuation vs. Shelter in Place
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="7">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 5 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon purple" aria-hidden="true">&#127968;</div>
                        <h2 class="slide-title">Evacuation vs. Shelter in Place</h2>
                    </div>
                    <div class="slide-text">
                        <div class="callout gold">
                            <strong>&#128161; Not All Emergencies = Evacuation!</strong> Knowing the difference can save your life.
                        </div>
                        <div class="compare-grid">
                            <div class="compare-card evacuate">
                                <h4>&#128682; EVACUATE When:</h4>
                                <ul>
                                    <li><span class="li-icon">&#128293;</span> Fire or smoke in building</li>
                                    <li><span class="li-icon">&#128168;</span> Gas leak inside</li>
                                    <li><span class="li-icon">&#9763;&#65039;</span> Chemical spill you can't control</li>
                                    <li><span class="li-icon">&#128163;</span> Bomb threat (usually)</li>
                                    <li><span class="li-icon">&#127959;</span> Building damage or collapse risk</li>
                                    <li><span class="li-icon">&#128276;</span> Evacuation alarm sounds</li>
                                </ul>
                            </div>
                            <div class="compare-card shelter">
                                <h4>&#127968; SHELTER IN PLACE When:</h4>
                                <ul>
                                    <li><span class="li-icon">&#127786;</span> Tornado warning</li>
                                    <li><span class="li-icon">&#9763;&#65039;</span> Hazardous chemical release OUTSIDE</li>
                                    <li><span class="li-icon">&#128296;</span> Active shooter OUTSIDE your area</li>
                                    <li><span class="li-icon">&#10052;&#65039;</span> Severe weather makes evacuation dangerous</li>
                                    <li><span class="li-icon">&#128226;</span> Instructed by emergency personnel</li>
                                </ul>
                            </div>
                        </div>
                        <h4>Shelter in Place Procedures:</h4>
                        <ol class="num-list">
                            <li><strong>Go to Shelter Area</strong> &mdash; Interior room with no windows, away from exterior walls</li>
                            <li><strong>Seal the Room</strong> &mdash; Close and lock all doors and windows; turn off HVAC</li>
                            <li><strong>Stay Informed</strong> &mdash; Monitor emergency communications, listen for updates</li>
                            <li><strong>Wait for All-Clear</strong> &mdash; Don't leave until officially cleared</li>
                        </ol>
                        <div class="callout orange">
                            <strong>Quick Reference:</strong> Fire &rarr; Evacuate | Tornado &rarr; Shelter | Chemical inside &rarr; Evacuate | Chemical outside &rarr; Shelter
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Know the difference! Going outside during a tornado or staying inside during a fire could be fatal."</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(8)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 8: Emergency Roles & Responsibilities
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="8">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 6 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon gold" aria-hidden="true">&#128101;</div>
                        <h2 class="slide-title">Emergency Roles &amp; Responsibilities</h2>
                    </div>
                    <div class="slide-text">
                        <h4>Designated Emergency Personnel:</h4>
                        <div class="role-grid">
                            <div class="role-card">
                                <h5>&#128227; Evacuation Coordinator</h5>
                                <p>Directs overall evacuation, communicates with emergency services, makes decisions, declares all-clear</p>
                            </div>
                            <div class="role-card">
                                <h5>&#128694; Floor Wardens</h5>
                                <p>Check assigned areas for people, ensure complete evacuation of their zone, report to coordinator</p>
                            </div>
                            <div class="role-card">
                                <h5>&#128203; Accountability Coordinator</h5>
                                <p>Takes roll call at assembly point, accounts for all employees, reports missing persons</p>
                            </div>
                            <div class="role-card">
                                <h5>&#127973; First Aid Responders</h5>
                                <p>Provide emergency medical care, triage injuries, coordinate with EMS, trained in CPR/First Aid</p>
                            </div>
                            <div class="role-card">
                                <h5>&#9881;&#65039; Equipment Operators</h5>
                                <p>Shut down critical equipment if time permits, only if trained and safe, evacuate immediately if unsafe</p>
                            </div>
                            <div class="role-card">
                                <h5>&#128222; Communications Coordinator</h5>
                                <p>Activates notification system, contacts 911, updates employees and management</p>
                            </div>
                        </div>
                        <div class="callout green">
                            <strong>Your Responsibilities (Everyone):</strong><br>
                            &#10003; Know the emergency procedures &bull; &#10003; Know your evacuation routes &amp; assembly point<br>
                            &#10003; Respond immediately to alarms &bull; &#10003; Follow instructions from emergency personnel<br>
                            &#10003; Help others if safe to do so &bull; &#10003; Participate in emergency drills
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"You might not have a special role, but you have responsibilities. Know what to do and do it!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(9)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 9: Emergency Drills
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="9">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 7 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon teal" aria-hidden="true">&#128336;</div>
                        <h2 class="slide-title">Emergency Drills &mdash; Practice Saves Lives</h2>
                    </div>
                    <div class="slide-text">
                        <h4>Why We Have Drills:</h4>
                        <ul class="check-list">
                            <li>Practice procedures so they become automatic</li>
                            <li>Identify problems with the plan</li>
                            <li>Improve response time</li>
                            <li>Build confidence and reduce panic</li>
                            <li>Meet OSHA requirements</li>
                        </ul>
                        <div class="two-sections">
                            <div class="section-block">
                                <h4>&#128197; Types of Drills</h4>
                                <ul class="check-list">
                                    <li><strong>Fire drills</strong> &mdash; At least annually</li>
                                    <li><strong>Tornado drills</strong> &mdash; If in tornado-prone area</li>
                                    <li><strong>Earthquake drills</strong> &mdash; If in earthquake zones</li>
                                    <li><strong>Active shooter drills</strong> &mdash; Increasingly common</li>
                                </ul>
                            </div>
                            <div class="section-block">
                                <h4>&#128203; How to Participate</h4>
                                <ul class="check-list">
                                    <li><strong>Treat every drill as real</strong></li>
                                    <li>Follow all procedures exactly</li>
                                    <li>Time yourself to the assembly point</li>
                                    <li>Note any obstacles or confusion</li>
                                    <li>Provide feedback afterward</li>
                                </ul>
                            </div>
                        </div>
                        <div class="stat-badge">&#128202; Regular drills can reduce evacuation time by 50% during real emergencies</div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"The best time to learn you don't know the evacuation route is during a drill &mdash; NOT during a real fire!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(10)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 10: Special Considerations
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="10">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 8 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon blue" aria-hidden="true">&#128101;</div>
                        <h2 class="slide-title">Special Considerations</h2>
                    </div>
                    <div class="slide-text">
                        <div class="two-sections">
                            <div class="section-block">
                                <h4>&#9855; Employees with Disabilities</h4>
                                <ul class="check-list">
                                    <li>Designated safe refuge areas</li>
                                    <li>Buddy system assignments</li>
                                    <li>Communication methods for hearing/vision impaired</li>
                                    <li>Evacuation assistance procedures</li>
                                    <li>Never leave anyone behind</li>
                                </ul>
                                <h4>&#128100; Working Alone or Off-Hours</h4>
                                <ul class="check-list">
                                    <li>Check-in procedures</li>
                                    <li>Emergency notification methods</li>
                                    <li>Know nearest exits even when alone</li>
                                    <li>Cell phone emergency contacts ready</li>
                                </ul>
                            </div>
                            <div class="section-block">
                                <h4>&#127759; Working Off-Site</h4>
                                <ul class="check-list">
                                    <li>Know that location's EAP</li>
                                    <li>Identify exits and assembly points</li>
                                    <li>Introduce yourself to site emergency coordinator</li>
                                    <li>Carry emergency contact info</li>
                                </ul>
                                <h4>&#128108; Visitors and Contractors</h4>
                                <ul class="check-list">
                                    <li>Must be informed of emergency procedures</li>
                                    <li>Should receive visitor badge with evacuation map</li>
                                    <li>Included in accountability process</li>
                                    <li>Escorted during emergencies if needed</li>
                                </ul>
                            </div>
                        </div>
                        <div class="callout gold">
                            <strong>&#128231; Family Communication:</strong> Know your company's family notification procedures. Have your emergency contact list updated. Use designated communication methods &mdash; don't call from the assembly point to keep lines clear.
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Everyone deserves to get out safely. Look out for those who need help &mdash; we're all in this together!"</div>
                        </div>
                    </div>
                </div>
            
                <div style="text-align: center; margin-top: 30px;">
                    <button class="next-slide-button" onclick="goToSlide(11)">Next &#8594;</button>
                </div></div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 11: KEY TAKEAWAYS
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="11">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Review</span>
                    <div class="slide-heading">
                        <div class="slide-icon gold" aria-hidden="true">&#128161;</div>
                        <h2 class="slide-title">Key Takeaways</h2>
                    </div>
                    <div class="takeaway-grid">
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#128214;</span>
                            <span class="takeaway-text">Know your plan BEFORE an emergency &mdash; panic is the enemy</span>
                        </div>
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#128682;</span>
                            <span class="takeaway-text">Get out, stay out, call out &mdash; the evacuation mantra</span>
                        </div>
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#9940;</span>
                            <span class="takeaway-text">NEVER use elevators during evacuation &mdash; always use stairs</span>
                        </div>
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#127786;</span>
                            <span class="takeaway-text">Know the difference: Evacuate for fire, shelter in place for tornado</span>
                        </div>
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#128336;</span>
                            <span class="takeaway-text">Drills save lives &mdash; take every single one seriously</span>
                        </div>
                        <div class="takeaway-item">
                            <span class="takeaway-icon">&#128205;</span>
                            <span class="takeaway-text">Report to your assembly point and check in &mdash; we need to know you're safe</span>
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Ready to test your knowledge? Let's make sure you're prepared for any emergency!"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 12: QUIZ Q1
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="12">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 1 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <p class="quiz-question-text">What does EAP stand for?</p>
                    <div class="quiz-options" id="q1-options" role="radiogroup" aria-label="Question 1 options">
                        <div class="quiz-option" data-q="1" data-val="A" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">A</span>
                            <span>Emergency Accident Prevention</span>
                        </div>
                        <div class="quiz-option" data-q="1" data-val="B" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">B</span>
                            <span>Emergency Action Plan</span>
                        </div>
                        <div class="quiz-option" data-q="1" data-val="C" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">C</span>
                            <span>Employee Assistance Program</span>
                        </div>
                        <div class="quiz-option" data-q="1" data-val="D" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">D</span>
                            <span>Exit and Assembly Procedures</span>
                        </div>
                    </div>
                    <div class="quiz-feedback" id="fb-1"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-1" disabled onclick="submitQuiz(1)">Submit Answer</button>
                    <button class="btn btn-dark" id="next-q-1" style="display:none" onclick="goToSlide(13)">Next Question &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 13: QUIZ Q2
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="13">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 2 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <p class="quiz-question-text">True or False: During a fire evacuation, you should use the elevator if it's the fastest way out.</p>
                    <div class="quiz-options" id="q2-options" role="radiogroup" aria-label="Question 2 options">
                        <div class="quiz-option" data-q="2" data-val="A" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">A</span>
                            <span>True</span>
                        </div>
                        <div class="quiz-option" data-q="2" data-val="B" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">B</span>
                            <span>False</span>
                        </div>
                    </div>
                    <div class="quiz-feedback" id="fb-2"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-2" disabled onclick="submitQuiz(2)">Submit Answer</button>
                    <button class="btn btn-dark" id="next-q-2" style="display:none" onclick="goToSlide(14)">Next Question &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 14: QUIZ Q3
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="14">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 3 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <p class="quiz-question-text">During a tornado warning, you should:</p>
                    <div class="quiz-options" id="q3-options" role="radiogroup" aria-label="Question 3 options">
                        <div class="quiz-option" data-q="3" data-val="A" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">A</span>
                            <span>Evacuate the building immediately</span>
                        </div>
                        <div class="quiz-option" data-q="3" data-val="B" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">B</span>
                            <span>Shelter in place in an interior room away from windows</span>
                        </div>
                        <div class="quiz-option" data-q="3" data-val="C" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">C</span>
                            <span>Go to your car in the parking lot</span>
                        </div>
                        <div class="quiz-option" data-q="3" data-val="D" role="radio" aria-checked="false" tabindex="0">
                            <span class="quiz-option-letter">D</span>
                            <span>Continue working and monitor the situation</span>
                        </div>
                    </div>
                    <div class="quiz-feedback" id="fb-3"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-3" disabled onclick="submitQuiz(3)">Submit Answer</button>
                    <button class="btn btn-dark" id="next-q-3" style="display:none" onclick="goToSlide(15)">See Results &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ══════════════════════════════════════════
             SLIDE 15: RESULTS
             ══════════════════════════════════════════ -->
        <div class="slide" data-slide="15">
            <div class="results-card">
                <div class="results-header">
                    <h2>&#128202; Quiz Results</h2>
                </div>
                <div class="results-body">
                    <div class="results-icon" id="rIcon">&#128202;</div>
                    <div class="results-score" id="rScore">0 / 3</div>
                    <div class="results-title" id="rTitle">Results</div>
                    <p class="results-msg" id="rMsg"></p>
                    <div class="results-btns" id="rBtns"></div>
                    <div class="results-katie">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <p id="rKatie"></p>
                    </div>
                </div>
            </div>
        </div>

    </div><!-- /slide-viewport -->

    <!-- ═══ BOTTOM NAV ═══ -->
    <nav class="bottom-nav" role="navigation" aria-label="Slide navigation">
        <div class="bottom-nav-inner">
            <button class="nav-btn" id="prevBtn" onclick="prevSlide()" disabled aria-label="Previous slide">&#8592; Previous</button>
            <div class="kbd-hints">
                <span class="kbd-hint"><span class="kbd">&#8592;</span> Prev</span>
                <span class="nav-slide-info" id="navInfo">1 / 15</span>
                <span class="kbd-hint">Next <span class="kbd">&#8594;</span></span>
            </div>
            <button class="nav-btn next-btn" id="nextBtn" onclick="nextSlide()" aria-label="Next slide">Next &#8594;</button>
        </div>
    </nav>

    <!-- ═══ JAVASCRIPT ═══ -->
    <script>
    (function() {
        'use strict';

        var TOTAL_SLIDES = 15;
        var MODULE_KEY = 'emergency-action';
        var currentSlide = 1;
        var quizScore = 0;
        var quizAnswers = { 1: null, 2: null, 3: null };
        var quizSubmitted = { 1: false, 2: false, 3: false };

        var quizCorrectAnswers = { 1: 'B', 2: 'B', 3: 'B' };

        var feedbackMessages = {
            1: {
                correct: '\u2713 Correct! EAP stands for Emergency Action Plan \u2014 your guide to staying safe during workplace emergencies.',
                incorrect: '\u2717 Incorrect. The correct answer is B: Emergency Action Plan. An EAP is a written document describing actions employees should take during emergencies.'
            },
            2: {
                correct: '\u2713 Correct! NEVER use elevators during a fire evacuation. Elevators can malfunction, fill with smoke, or trap you. Always use stairs.',
                incorrect: '\u2717 Incorrect. The correct answer is B: False. NEVER use elevators during fire evacuation \u2014 they can fail or fill with smoke. Always use stairs.'
            },
            3: {
                correct: '\u2713 Correct! During a tornado, shelter in place in an interior room on the lowest floor, away from windows. Evacuating puts you in danger.',
                incorrect: '\u2717 Incorrect. The correct answer is B: Shelter in place in an interior room away from windows. Never go outside during a tornado.'
            }
        };

        // ─── SLIDE NAVIGATION ───
        function getAllSlides() {
            return document.querySelectorAll('.slide');
        }

        function updateUI() {
            var slides = getAllSlides();
            slides.forEach(function(s) {
                var num = parseInt(s.getAttribute('data-slide'));
                s.classList.remove('active', 'exit-left');
                if (num === currentSlide) {
                    s.classList.add('active');
                }
            });

            var pct = Math.round((currentSlide / TOTAL_SLIDES) * 100);
            document.getElementById('progressFill').style.width = pct + '%';
            document.getElementById('progressLabel').textContent = 'Slide ' + currentSlide + ' of ' + TOTAL_SLIDES;
            document.getElementById('progressPct').textContent = pct + '%';
            document.getElementById('navInfo').textContent = currentSlide + ' / ' + TOTAL_SLIDES;

            var progressTrack = document.querySelector('.progress-track');
            if (progressTrack) progressTrack.setAttribute('aria-valuenow', pct);

            document.getElementById('prevBtn').disabled = (currentSlide <= 1);
            document.getElementById('nextBtn').disabled = (currentSlide >= TOTAL_SLIDES);

            var activeSlide = document.querySelector('.slide.active');
            if (activeSlide) {
                var scrollable = activeSlide.querySelector('.slide-card-body');
                if (scrollable) scrollable.scrollTop = 0;
            }

            saveSlideProgress();
        }

        window.goToSlide = function(num) {
            if (num < 1 || num > TOTAL_SLIDES) return;
            if (num === 15) buildResults();
            currentSlide = num;
            updateUI();
        };

        window.nextSlide = function() {
            if (currentSlide < TOTAL_SLIDES) {
                goToSlide(currentSlide + 1);
            }
        };

        window.prevSlide = function() {
            if (currentSlide > 1) {
                goToSlide(currentSlide - 1);
            }
        };

        // ─── KEYBOARD NAV ───
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            if (e.key === 'ArrowRight' || e.key === 'Right') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
                e.preventDefault();
                prevSlide();
            }
        });

        // ─── QUIZ OPTION SELECTION ───
        document.querySelectorAll('.quiz-option').forEach(function(opt) {
            opt.addEventListener('click', function() {
                var qNum = parseInt(this.getAttribute('data-q'));
                if (quizSubmitted[qNum]) return;

                var container = document.getElementById('q' + qNum + '-options');
                container.querySelectorAll('.quiz-option').forEach(function(o) {
                    o.classList.remove('selected');
                    o.setAttribute('aria-checked', 'false');
                });

                this.classList.add('selected');
                this.setAttribute('aria-checked', 'true');
                quizAnswers[qNum] = this.getAttribute('data-val');

                document.getElementById('submit-' + qNum).disabled = false;
            });
        });

        // ─── QUIZ SUBMIT ───
        window.submitQuiz = function(qNum) {
            if (quizSubmitted[qNum]) return;
            quizSubmitted[qNum] = true;

            var userAnswer = quizAnswers[qNum];
            var correctAnswer = quizCorrectAnswers[qNum];
            var isCorrect = (userAnswer === correctAnswer);
            var container = document.getElementById('q' + qNum + '-options');

            container.querySelectorAll('.quiz-option').forEach(function(opt) {
                opt.classList.add('disabled');
                var val = opt.getAttribute('data-val');
                if (val === correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected') && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            var fb = document.getElementById('fb-' + qNum);
            if (isCorrect) {
                fb.textContent = feedbackMessages[qNum].correct;
                fb.className = 'quiz-feedback show correct-fb';
                quizScore++;
            } else {
                fb.textContent = feedbackMessages[qNum].incorrect;
                fb.className = 'quiz-feedback show incorrect-fb';
            }

            document.getElementById('submit-' + qNum).style.display = 'none';
            document.getElementById('next-q-' + qNum).style.display = '';
        };

        // ─── BUILD RESULTS ───
        function buildResults() {
            var icon = document.getElementById('rIcon');
            var score = document.getElementById('rScore');
            var title = document.getElementById('rTitle');
            var msg = document.getElementById('rMsg');
            var btns = document.getElementById('rBtns');
            var katie = document.getElementById('rKatie');

            score.textContent = quizScore + ' / 3';

            if (quizScore === 3) {
                icon.textContent = '\uD83C\uDF89';
                title.textContent = 'Perfect Score!';
                msg.textContent = "You're ready for any emergency! Excellent knowledge of EAPs and emergency response.";
                btns.innerHTML = '<button class="btn btn-success" onclick="completeModule()">\u2713 Complete Module & Return to Hub</button>';
                katie.textContent = '"Outstanding work! You know exactly what to do in an emergency. Ready for Module 5: First Aid & AED?"';
            } else if (quizScore >= 2) {
                icon.textContent = '\u2705';
                title.textContent = 'You Passed!';
                msg.textContent = "Good understanding of emergency procedures. You've demonstrated solid knowledge of EAPs.";
                btns.innerHTML = '<button class="btn btn-success" onclick="completeModule()">\u2713 Complete Module & Return to Hub</button>';
                katie.textContent = '"Great work! You\'ve got a solid grasp of emergency procedures. Stay prepared!"';
            } else {
                icon.textContent = '\uD83D\uDCDA';
                title.textContent = 'Not Quite Yet';
                msg.textContent = 'You need at least 2 out of 3 correct to pass. Review the lesson and try again!';
                btns.innerHTML = '<button class="btn btn-gold" onclick="retakeQuiz()">\u21BB Retake Quiz</button>' +
                    '<button class="btn btn-outline" onclick="goToSlide(3)">\u2191 Review Lesson</button>';
                katie.textContent = '"Don\'t worry! Review the slides and give it another try. You\'ve got this!"';
            }

            saveQuizProgress();
        }

        // ─── RETAKE QUIZ ───
        window.retakeQuiz = function() {
            quizAnswers = { 1: null, 2: null, 3: null };
            quizSubmitted = { 1: false, 2: false, 3: false };
            quizScore = 0;

            for (var q = 1; q <= 3; q++) {
                var container = document.getElementById('q' + q + '-options');
                container.querySelectorAll('.quiz-option').forEach(function(opt) {
                    opt.classList.remove('selected', 'correct', 'incorrect', 'disabled');
                    opt.setAttribute('aria-checked', 'false');
                });

                document.getElementById('fb-' + q).className = 'quiz-feedback';
                document.getElementById('fb-' + q).textContent = '';
                document.getElementById('submit-' + q).style.display = '';
                document.getElementById('submit-' + q).disabled = true;
                document.getElementById('next-q-' + q).style.display = 'none';
            }

            goToSlide(12);
        };

        // ─── LOCAL STORAGE ───
        function getProgress() {
            try {
                var d = localStorage.getItem('safetyverse-progress');
                return d ? JSON.parse(d) : {};
            } catch(e) { return {}; }
        }

        function saveSlideProgress() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules[MODULE_KEY]) {
                    p.modules[MODULE_KEY] = { completed: false, quizScore: 0, attempts: 0, lastAttempt: null };
                }
                p.modules[MODULE_KEY].currentSlide = currentSlide;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
            } catch(e) {}
        }

        function saveQuizProgress() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules[MODULE_KEY]) {
                    p.modules[MODULE_KEY] = { completed: false, quizScore: 0, attempts: 0 };
                }
                var mod = p.modules[MODULE_KEY];
                mod.quizScore = quizScore;
                mod.attempts = (mod.attempts || 0) + 1;
                mod.lastAttempt = new Date().toISOString();
                if (quizScore >= 2) mod.completed = true;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
            } catch(e) {}
        }

        window.completeModule = function() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules[MODULE_KEY]) {
                    p.modules[MODULE_KEY] = { quizScore: 0, attempts: 0 };
                }
                p.modules[MODULE_KEY].completed = true;
                p.modules[MODULE_KEY].completedAt = new Date().toISOString();
                p.modules[MODULE_KEY].quizScore = quizScore;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
            } catch(e) {}
            window.location.href = '../../user-dashboard/index.html';
        };

        // ─── RESTORE PROGRESS ON LOAD ───
        function restoreProgress() {
            try {
                var p = getProgress();
                if (p.modules && p.modules[MODULE_KEY]) {
                    var mod = p.modules[MODULE_KEY];
                    if (mod.completed) {
                        var introCard = document.querySelector('.intro-card');
                        if (introCard) {
                            var badge = document.createElement('div');
                            badge.style.cssText = 'position:absolute;top:20px;right:20px;background:var(--success);color:white;font-size:12px;font-weight:700;padding:5px 16px;border-radius:20px;z-index:5;';
                            badge.textContent = '\u2713 Completed';
                            introCard.appendChild(badge);
                        }
                    }
                }
            } catch(e) {}
        }

        // ─── INIT ───
        restoreProgress();
        updateUI();

    })();
    </script>

</body>
</html>
