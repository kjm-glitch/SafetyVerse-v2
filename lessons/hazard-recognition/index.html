<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="logo.png?v=2">
    <title>Module 2: Hazard Recognition - TheSafetyVerse</title>
    <style>
        /* ═══════════════════════════════════════════
           CSS VARIABLES & RESET
           ═══════════════════════════════════════════ */
        :root {
            --primary: #FFD700;
            --primary-dark: #E6C200;
            --secondary: #FF8C00;
            --secondary-dark: #E67A00;
            --bg-clay: #F5E6D3;
            --bg-clay-dark: #E8D5C0;
            --bg-clay-light: #FAF0E6;
            --text-dark: #333333;
            --text-medium: #555555;
            --text-light: #777777;
            --accent-black: #1A1A1A;
            --white: #FFFFFF;
            --success: #4CAF50;
            --success-dark: #388E3C;
            --error: #E53935;
            --error-dark: #C62828;
            --info: #2196F3;
            --shadow-soft: 0 4px 15px rgba(0,0,0,0.1);
            --shadow-medium: 0 6px 25px rgba(0,0,0,0.15);
            --shadow-hard: 0 8px 30px rgba(0,0,0,0.2);
            --shadow-clay: 4px 4px 0px rgba(0,0,0,0.15), inset 0 2px 4px rgba(255,255,255,0.3);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 28px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --font-heading: 'Segoe UI', 'Arial Black', sans-serif;
            --font-body: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-clay);
            color: var(--text-dark);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
        }

        /* Clay texture */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(139,90,43,0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139,90,43,0.02) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(139,90,43,0.03) 0%, transparent 50%);
        }

        /* ═══════════════════════════════════════════
           HEADER
           ═══════════════════════════════════════════ */
        .header {
            background: linear-gradient(180deg, var(--accent-black) 0%, #2A2A2A 100%);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-bottom: 4px solid var(--primary);
            z-index: 100;
            flex-shrink: 0;
        }

        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            flex-shrink: 0;
        }

        .logo-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .logo-icon img {
            display: block;
            height: 50px;
            width: auto;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.15);
            border-radius: 12px;
            transition: transform 0.2s ease;
        }

        .logo-text {
            font-family: var(--font-heading);
            font-size: 22px; font-weight: 900;
            color: var(--white);
            letter-spacing: -0.5px;
        }

        .logo-text em {
            color: var(--primary);
            font-style: normal;
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 10px;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .header-module-tag {
            background: rgba(255,215,0,0.15);
            color: var(--primary);
            font-size: 11px; font-weight: 800;
            padding: 3px 10px;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .header-module-title {
            color: rgba(255,255,255,0.8);
            font-size: 14px; font-weight: 600;
        }

        .back-btn {
            display: flex; align-items: center; gap: 6px;
            text-decoration: none;
            color: rgba(255,255,255,0.7);
            font-size: 13px; font-weight: 600;
            padding: 7px 14px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .back-btn:hover {
            color: var(--white);
            background: rgba(255,255,255,0.12);
            border-color: rgba(255,255,255,0.2);
        }

        /* ═══════════════════════════════════════════
           PROGRESS BAR
           ═══════════════════════════════════════════ */
        .progress-bar {
            background: var(--accent-black);
            border-bottom: 1px solid rgba(255,215,0,0.15);
            flex-shrink: 0;
            z-index: 99;
        }

        .progress-bar-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 8px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .progress-label {
            font-size: 12px; font-weight: 700;
            color: rgba(255,255,255,0.5);
            white-space: nowrap;
            min-width: 90px;
        }

        .progress-track {
            flex: 1;
            height: 6px;
            background: rgba(255,255,255,0.08);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 0.4s ease;
        }

        .progress-pct {
            font-size: 12px; font-weight: 700;
            color: var(--primary);
            white-space: nowrap;
            min-width: 32px;
            text-align: right;
        }

        /* ═══════════════════════════════════════════
           SLIDE VIEWPORT
           ═══════════════════════════════════════════ */
        .slide-viewport {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, transform 0.4s ease;
            transform: translateX(40px);
            overflow-y: auto;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
            z-index: 2;
        }

        .slide.exit-left {
            opacity: 0;
            transform: translateX(-40px);
        }

        /* ═══════════════════════════════════════════
           SLIDE INNER CARD
           ═══════════════════════════════════════════ */
        .slide-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-hard);
            width: 100%;
            max-width: 860px;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .slide-card-body {
            padding: 36px 40px 32px;
            flex: 1;
            overflow-y: auto;
            max-height: calc(100vh - 220px);
        }

        /* Slide number badge */
        .slide-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--accent-black);
            font-size: 11px; font-weight: 800;
            padding: 4px 14px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 18px;
        }

        /* Slide header with icon */
        .slide-heading {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 22px;
        }

        .slide-icon {
            width: 54px; height: 54px;
            border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
            box-shadow: var(--shadow-clay);
        }

        .slide-icon.blue { background: linear-gradient(135deg, #E3F2FD, #BBDEFB); }
        .slide-icon.green { background: linear-gradient(135deg, #E8F5E9, #C8E6C9); }
        .slide-icon.orange { background: linear-gradient(135deg, #FFF3E0, #FFE0B2); }
        .slide-icon.red { background: linear-gradient(135deg, #FFEBEE, #FFCDD2); }
        .slide-icon.purple { background: linear-gradient(135deg, #F3E5F5, #E1BEE7); }
        .slide-icon.yellow { background: linear-gradient(135deg, #FFFDE7, #FFF9C4); }
        .slide-icon.teal { background: linear-gradient(135deg, #E0F2F1, #B2DFDB); }
        .slide-icon.gold { background: linear-gradient(135deg, #FFF8E1, #FFE082); }

        .slide-title {
            font-family: var(--font-heading);
            font-size: 26px; font-weight: 900;
            color: var(--text-dark);
            line-height: 1.2;
        }

        /* Content text */
        .slide-text {
            font-size: 16px;
            color: var(--text-medium);
            line-height: 1.7;
        }

        .slide-text p { margin-bottom: 14px; }

        .slide-text strong { color: var(--text-dark); }

        /* Checklists */
        .check-list {
            list-style: none;
            margin: 16px 0;
        }

        .check-list li {
            padding: 9px 0 9px 36px;
            position: relative;
            font-size: 15px;
            color: var(--text-medium);
            line-height: 1.55;
        }

        .check-list li::before {
            content: '\2713';
            position: absolute;
            left: 0; top: 9px;
            width: 24px; height: 24px;
            background: #E8F5E9;
            color: var(--success);
            font-weight: 900; font-size: 13px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }

        /* X list (retaliation items) */
        .x-list {
            list-style: none;
            margin: 16px 0;
        }

        .x-list li {
            padding: 9px 0 9px 36px;
            position: relative;
            font-size: 15px;
            color: var(--text-medium);
            line-height: 1.55;
        }

        .x-list li::before {
            content: '\2717';
            position: absolute;
            left: 0; top: 9px;
            width: 24px; height: 24px;
            background: #FFEBEE;
            color: var(--error);
            font-weight: 900; font-size: 12px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }

        /* Numbered list */
        .num-list {
            list-style: none;
            margin: 16px 0;
            counter-reset: numlist;
        }

        .num-list li {
            padding: 9px 0 9px 36px;
            position: relative;
            font-size: 15px;
            color: var(--text-medium);
            line-height: 1.55;
            counter-increment: numlist;
        }

        .num-list li::before {
            content: counter(numlist);
            position: absolute;
            left: 0; top: 9px;
            width: 24px; height: 24px;
            background: #E3F2FD;
            color: var(--info);
            font-weight: 800; font-size: 12px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }

        /* Icon list */
        .icon-list {
            list-style: none;
            margin: 16px 0;
        }

        .icon-list li {
            padding: 9px 0 9px 36px;
            position: relative;
            font-size: 15px;
            color: var(--text-medium);
            line-height: 1.55;
        }

        .icon-list li .li-icon {
            position: absolute;
            left: 2px; top: 10px;
            font-size: 16px;
        }

        /* ═══════════════════════════════════════════
           CALLOUT BOXES
           ═══════════════════════════════════════════ */
        .callout {
            border-radius: var(--radius-sm);
            padding: 16px 20px;
            margin: 18px 0;
            font-size: 15px;
            line-height: 1.6;
        }

        .callout.gold {
            background: linear-gradient(135deg, #FFFDE7, #FFF9C4);
            border-left: 4px solid var(--primary);
        }

        .callout.orange {
            background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
            border-left: 4px solid var(--secondary);
        }

        .callout.blue {
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border-left: 4px solid var(--info);
        }

        .callout.green {
            background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
            border-left: 4px solid var(--success);
        }

        /* Stat callout */
        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--accent-black);
            padding: 10px 22px;
            border-radius: 28px;
            font-weight: 800; font-size: 15px;
            box-shadow: var(--shadow-clay);
            margin-top: 6px;
        }

        /* ═══════════════════════════════════════════
           KATIE TIP
           ═══════════════════════════════════════════ */
        .katie-tip {
            display: flex;
            gap: 14px;
            align-items: flex-start;
            background: linear-gradient(135deg, #FFFDE7, #FFF9C4);
            border: 2px solid var(--primary);
            border-radius: var(--radius-md);
            padding: 16px 18px;
            margin-top: 22px;
        }

        .katie-avatar {
            width: 48px; height: auto;
            border-radius: 10px;
            border: 2px solid var(--primary);
            background: #fff;
            flex-shrink: 0;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        .katie-tip-body { flex: 1; }

        .katie-tip-label {
            font-size: 10px; font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--secondary-dark);
            margin-bottom: 3px;
        }

        .katie-tip-msg {
            font-size: 14px;
            color: var(--text-dark);
            font-style: italic;
            line-height: 1.5;
        }

        /* ═══════════════════════════════════════════
           CONTACT CARDS
           ═══════════════════════════════════════════ */
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 14px;
            margin: 20px 0;
        }

        .contact-card {
            background: var(--bg-clay-light);
            border-radius: var(--radius-md);
            padding: 20px 14px;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .contact-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }

        .contact-card-icon { font-size: 32px; margin-bottom: 8px; }

        .contact-card-label {
            font-weight: 800;
            font-size: 14px;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .contact-card-detail {
            font-size: 13px;
            color: var(--text-light);
        }

        /* ═══════════════════════════════════════════
           TAKEAWAY ITEMS
           ═══════════════════════════════════════════ */
        .takeaway-grid {
            display: grid;
            gap: 12px;
            margin-top: 18px;
        }

        .takeaway-item {
            display: flex;
            align-items: center;
            gap: 14px;
            background: var(--bg-clay-light);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            border-left: 4px solid var(--primary);
            transition: var(--transition);
        }

        .takeaway-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-soft);
        }

        .takeaway-icon { font-size: 22px; flex-shrink: 0; }

        .takeaway-text {
            font-size: 15px; font-weight: 600;
            color: var(--text-dark);
        }

        /* ═══════════════════════════════════════════
           SLIDE 1: INTRO CARD (Dark Theme)
           ═══════════════════════════════════════════ */
        .intro-card {
            background: linear-gradient(135deg, var(--accent-black) 0%, #2A2A2A 50%, #333 100%);
            color: var(--white);
            border-radius: var(--radius-xl);
            max-width: 860px;
            width: 100%;
            padding: 50px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-hard);
        }

        .intro-card::before {
            content: '';
            position: absolute;
            top: -40%; right: -15%;
            width: 450px; height: 450px;
            background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 65%);
            pointer-events: none;
        }

        .intro-card::after {
            content: '';
            position: absolute;
            bottom: -30%; left: -10%;
            width: 300px; height: 300px;
            background: radial-gradient(circle, rgba(255,140,0,0.06) 0%, transparent 65%);
            pointer-events: none;
        }

        .intro-badge {
            display: inline-block;
            background: var(--primary);
            color: var(--accent-black);
            font-size: 11px; font-weight: 800;
            padding: 5px 16px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-bottom: 24px;
        }

        .intro-card h1 {
            font-family: var(--font-heading);
            font-size: 38px; font-weight: 900;
            line-height: 1.15;
            margin-bottom: 14px;
        }

        .intro-card h1 em {
            color: var(--primary);
            font-style: normal;
        }

        .intro-desc {
            color: rgba(255,255,255,0.65);
            font-size: 17px;
            max-width: 520px;
            line-height: 1.6;
            margin-bottom: 28px;
        }

        .intro-meta {
            display: flex;
            gap: 24px;
            margin-bottom: 36px;
            flex-wrap: wrap;
        }

        .intro-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255,255,255,0.5);
            font-size: 14px; font-weight: 600;
        }

        .intro-meta-item span {
            font-size: 20px;
        }

        .intro-start-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--accent-black);
            font-size: 16px; font-weight: 800;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-clay);
            letter-spacing: 0.3px;
        }

        .intro-start-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 30px rgba(255,215,0,0.3);
        }

        .intro-katie {
            position: absolute;
            right: 40px; bottom: 30px;
            width: 140px; height: auto;
            border-radius: 12px;
            border: 4px solid var(--primary);
            background: #fff;
            padding: 6px;
            box-shadow: 0 6px 30px rgba(0,0,0,0.4);
            opacity: 0.95;
        }

        /* ═══════════════════════════════════════════
           SLIDE 2: VIDEO
           ═══════════════════════════════════════════ */
        .video-wrap {
            width: 100%;
            max-width: 860px;
        }

        .video-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-hard);
            overflow: hidden;
        }

        .video-card-header {
            padding: 24px 32px 0;
        }

        .video-card-header h2 {
            font-family: var(--font-heading);
            font-size: 22px; font-weight: 800;
            display: flex; align-items: center; gap: 10px;
        }

        .video-card-header p {
            color: var(--text-light);
            font-size: 14px;
            margin-top: 4px;
        }

        .video-player-area {
            margin: 20px 32px;
            background: linear-gradient(135deg, #111, #222);
            border-radius: var(--radius-md);
            aspect-ratio: 16/9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .video-player-area::before {
            content: '';
            position: absolute; inset: 0;
            background: repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,0.015) 10px,rgba(255,255,255,0.015) 20px);
            pointer-events: none;
        }

        .video-play-btn {
            width: 72px; height: 72px;
            border-radius: 50%;
            background: rgba(255,215,0,0.15);
            border: 3px solid var(--primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 30px;
            margin-bottom: 14px;
            color: var(--primary);
        }

        .video-player-area h3 {
            color: var(--white);
            font-size: 17px;
            margin-bottom: 6px;
        }

        .video-player-area p {
            color: rgba(255,255,255,0.4);
            font-size: 13px;
        }

        .video-card-footer {
            padding: 16px 32px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .mark-watched-btn {
            display: inline-flex;
            align-items: center; gap: 6px;
            padding: 8px 18px;
            border: 2px solid rgba(0,0,0,0.1);
            background: var(--bg-clay-light);
            color: var(--text-light);
            border-radius: var(--radius-sm);
            font-size: 13px; font-weight: 600;
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* ═══════════════════════════════════════════
           QUIZ STYLES
           ═══════════════════════════════════════════ */
        .quiz-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-hard);
            border: 2px solid var(--primary);
            width: 100%;
            max-width: 860px;
            overflow: hidden;
        }

        .quiz-card-header {
            background: linear-gradient(135deg, var(--accent-black), #2A2A2A);
            padding: 20px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .quiz-card-header h2 {
            font-family: var(--font-heading);
            font-size: 18px; font-weight: 800;
            color: var(--white);
            display: flex; align-items: center; gap: 8px;
        }

        .quiz-progress-badge {
            background: rgba(255,215,0,0.15);
            color: var(--primary);
            font-size: 12px; font-weight: 700;
            padding: 4px 12px;
            border-radius: 14px;
        }

        .quiz-card-body {
            padding: 36px 40px;
        }

        .quiz-question-text {
            font-size: 19px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 24px;
            line-height: 1.45;
        }

        .quiz-options { display: grid; gap: 10px; }

        .quiz-option {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 15px 20px;
            border: 2px solid rgba(0,0,0,0.09);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            background: var(--bg-clay-light);
            font-size: 15px;
            color: var(--text-dark);
        }

        .quiz-option:hover:not(.disabled) {
            border-color: var(--primary);
            background: #FFFDE7;
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: #FFFDE7;
            font-weight: 600;
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: #E8F5E9;
        }

        .quiz-option.incorrect {
            border-color: var(--error);
            background: #FFEBEE;
        }

        .quiz-option.disabled { cursor: default; }

        .quiz-option.disabled:not(.correct):not(.selected) { opacity: 0.5; }

        .quiz-option-letter {
            width: 34px; height: 34px;
            border-radius: 50%;
            background: rgba(0,0,0,0.06);
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 14px;
            flex-shrink: 0;
            transition: var(--transition);
        }

        .quiz-option.selected .quiz-option-letter {
            background: var(--primary);
            color: var(--accent-black);
        }

        .quiz-option.correct .quiz-option-letter {
            background: var(--success);
            color: var(--white);
        }

        .quiz-option.incorrect .quiz-option-letter {
            background: var(--error);
            color: var(--white);
        }

        .quiz-feedback {
            margin-top: 16px;
            padding: 14px 18px;
            border-radius: var(--radius-sm);
            font-size: 14px; font-weight: 600;
            display: none;
            line-height: 1.5;
        }

        .quiz-feedback.show { display: block; }

        .quiz-feedback.correct-fb {
            background: #E8F5E9;
            color: #2E7D32;
            border: 1px solid #C8E6C9;
        }

        .quiz-feedback.incorrect-fb {
            background: #FFEBEE;
            color: #C62828;
            border: 1px solid #FFCDD2;
        }

        .quiz-card-actions {
            padding: 0 40px 32px;
            display: flex;
            gap: 12px;
        }

        /* ═══════════════════════════════════════════
           RESULTS CARD
           ═══════════════════════════════════════════ */
        .results-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-hard);
            width: 100%;
            max-width: 860px;
            text-align: center;
            overflow: hidden;
        }

        .results-header {
            background: linear-gradient(135deg, var(--accent-black), #2A2A2A);
            padding: 20px 32px;
        }

        .results-header h2 {
            font-family: var(--font-heading);
            font-size: 18px; font-weight: 800;
            color: var(--white);
        }

        .results-body {
            padding: 40px;
        }

        .results-icon { font-size: 60px; margin-bottom: 12px; }

        .results-score {
            font-family: var(--font-heading);
            font-size: 48px; font-weight: 900;
            color: var(--primary-dark);
            margin-bottom: 8px;
        }

        .results-title {
            font-family: var(--font-heading);
            font-size: 24px; font-weight: 800;
            margin-bottom: 8px;
        }

        .results-msg {
            color: var(--text-medium);
            font-size: 16px;
            max-width: 450px;
            margin: 0 auto 10px;
            line-height: 1.5;
        }

        .results-btns {
            display: flex;
            gap: 14px;
            justify-content: center;
            margin-top: 28px;
            flex-wrap: wrap;
        }

        .results-katie {
            margin-top: 28px;
            padding-top: 24px;
            border-top: 2px dashed rgba(0,0,0,0.06);
            display: flex;
            align-items: center;
            gap: 14px;
            justify-content: center;
        }

        .results-katie img {
            width: 50px; height: auto;
            border-radius: 10px;
            border: 2px solid var(--primary);
            background: #fff;
            padding: 3px;
        }

        .results-katie p {
            font-style: italic;
            font-size: 15px;
            color: var(--text-medium);
            text-align: left;
        }

        /* ═══════════════════════════════════════════
           BUTTONS
           ═══════════════════════════════════════════ */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 28px;
            border-radius: var(--radius-sm);
            font-size: 14px; font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            text-decoration: none;
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--accent-black);
            box-shadow: var(--shadow-clay);
        }

        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-gold:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .btn-dark {
            background: var(--accent-black);
            color: var(--white);
        }

        .btn-dark:hover {
            background: #333;
            transform: translateY(-1px);
        }

        .btn-outline {
            background: var(--white);
            color: var(--text-dark);
            border: 2px solid rgba(0,0,0,0.12);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            background: #FFFDE7;
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-success:hover {
            background: var(--success-dark);
            transform: translateY(-2px);
        }

        /* ═══════════════════════════════════════════
           BOTTOM NAV BAR
           ═══════════════════════════════════════════ */
        .bottom-nav {
            background: var(--white);
            border-top: 1px solid rgba(0,0,0,0.08);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            flex-shrink: 0;
            z-index: 100;
        }

        .bottom-nav-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 24px;
            border-radius: var(--radius-sm);
            font-size: 14px; font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid rgba(0,0,0,0.1);
            background: var(--white);
            color: var(--text-dark);
        }

        .nav-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background: #FFFDE7;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn.next-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--accent-black);
            border: none;
            box-shadow: var(--shadow-clay);
        }

        .nav-btn.next-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .nav-slide-info {
            font-size: 13px; font-weight: 700;
            color: var(--text-light);
        }

        /* Keyboard hint */
        .kbd-hints {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .kbd-hint {
            font-size: 11px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .kbd {
            display: inline-block;
            background: var(--bg-clay);
            border: 1px solid rgba(0,0,0,0.12);
            border-radius: 4px;
            padding: 1px 6px;
            font-size: 10px;
            font-weight: 700;
            font-family: monospace;
        }

        /* ═══════════════════════════════════════════
           TWO SECTION LAYOUT
           ═══════════════════════════════════════════ */
        .two-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 16px 0;
        }

        .two-sections .section-block h4 {
            font-size: 14px; font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 8px;
            display: flex; align-items: center; gap: 6px;
        }

        /* ═══════════════════════════════════════════
           RESPONSIVE
           ═══════════════════════════════════════════ */
        @media (max-width: 768px) {
            .header-inner { height: 56px; padding: 0 16px; }
            .header-center { display: none; }
            .logo-text { font-size: 19px; }
            .back-btn { padding: 6px 10px; font-size: 12px; }
            .progress-bar-inner { padding: 6px 16px; }

            .slide { padding: 16px; }
            .slide-card-body { padding: 24px 20px 20px; max-height: calc(100vh - 200px); }
            .slide-title { font-size: 22px; }

            .intro-card { padding: 32px 24px; }
            .intro-card h1 { font-size: 28px; }
            .intro-katie { width: 90px; height: auto; right: 20px; bottom: 20px; }
            .intro-desc { font-size: 15px; }

            .contact-grid { grid-template-columns: 1fr; }
            .two-sections { grid-template-columns: 1fr; }

            .quiz-card-body { padding: 24px 20px; }
            .quiz-card-actions { padding: 0 20px 24px; }
            .quiz-question-text { font-size: 17px; }

            .results-body { padding: 28px 20px; }

            .video-card-header { padding: 20px 20px 0; }
            .video-player-area { margin: 16px 20px; }
            .video-card-footer { padding: 12px 20px 20px; flex-direction: column; gap: 10px; }

            .bottom-nav-inner { padding: 10px 16px; }
            .kbd-hints { display: none; }
            .nav-btn { padding: 10px 16px; font-size: 13px; }
        }

        @media (max-width: 480px) {
            .intro-card h1 { font-size: 24px; }
            .intro-katie { display: none; }
            .intro-meta { gap: 14px; }
            .intro-start-btn { padding: 14px 28px; font-size: 15px; }
            .slide-heading { flex-direction: column; align-items: flex-start; gap: 10px; }
            .katie-tip { flex-direction: column; text-align: center; align-items: center; }
        }

        /* Katie Circular Avatar Styles */
        .katie-avatar-small {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            border: 3px solid #FFD700;
            display: block;
            flex-shrink: 0;
        }
        .katie-avatar-medium {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            border: 3px solid #FFD700;
            display: block;
            flex-shrink: 0;
        }
        .katie-avatar-large {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            object-position: center 20%;
            border: 4px solid #FFD700;
            display: block;
            flex-shrink: 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <!-- ═══════════════════════════════════════════
         HEADER
         ═══════════════════════════════════════════ -->
    <header class="header" role="banner">
        <div class="header-inner">
            <a href="../../user-dashboard/index.html" class="logo" aria-label="TheSafetyVerse Home">
                <div class="logo-icon" aria-hidden="true"><img src="logo.png?v=2" alt="TheSafetyVerse Logo" style="height: 50px; width: auto;"></div>
                <div class="logo-text"><em>The</em>Safety<em>Verse</em></div>
            </a>
            <div class="header-center">
                <span class="header-module-tag">Module 2</span>
                <span class="header-module-title">Hazard Recognition</span>
            </div>
            <a href="../../user-dashboard/index.html" class="back-btn">&#8592; Back to Dashboard</a>
        </div>
    </header>

    <!-- ═══════════════════════════════════════════
         PROGRESS BAR
         ═══════════════════════════════════════════ -->
    <div class="progress-bar" role="navigation" aria-label="Lesson progress">
        <div class="progress-bar-inner">
            <span class="progress-label" id="progressLabel">Slide 1 of 14</span>
            <div class="progress-track" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <span class="progress-pct" id="progressPct">7%</span>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════
         SLIDE VIEWPORT
         ═══════════════════════════════════════════ -->
    <div class="slide-viewport">

        <!-- ============ SLIDE 1: INTRO ============ -->
        <div class="slide active" data-slide="1">
            <div class="intro-card">
                <span class="intro-badge">Module 2 of 9</span>
                <h1>Hazard<br><em>Recognition</em></h1>
                <p class="intro-desc">Learn to identify, assess, and report workplace hazards before they cause injuries. Spotting dangers is the first step to preventing them.</p>
                <div class="intro-meta">
                    <div class="intro-meta-item"><span>&#128218;</span> 8 Content Slides</div>
                    <div class="intro-meta-item"><span>&#10067;</span> 3 Quiz Questions</div>
                    <div class="intro-meta-item"><span>&#9201;</span> ~15 min</div>
                </div>
                <button class="intro-start-btn" onclick="goToSlide(2)" aria-label="Start Module">Start Module &#8594;</button>
                <img src="katie.png" alt="Katie" class="katie-avatar-large">
            </div>
        </div>

        <!-- ============ SLIDE 2: VIDEO ============ -->
        <div class="slide" data-slide="2">
            <div class="video-wrap">
                <div class="video-card">
                    <div class="video-card-header">
                        <h2>&#127909; Spotting Hazards: A Practical Guide</h2>
                        <p>Watch this overview before diving into the lesson content</p>
                    </div>
                    <div class="video-player-area">
                        <div class="video-play-btn" aria-hidden="true">&#9654;</div>
                        <h3>Video Coming Soon</h3>
                        <p>A hazard recognition video is being prepared</p>
                    </div>
                    <div class="video-card-footer">
                        <button class="mark-watched-btn" disabled aria-label="Mark as watched - coming soon">&#9744; Mark as Watched</button>
                        <button class="btn btn-gold" onclick="goToSlide(3)">Next: Begin Lesson &#8594;</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 3: What is a Hazard? ============ -->
        <div class="slide" data-slide="3">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 1 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon orange" aria-hidden="true">&#9888;</div>
                        <h2 class="slide-title">What is a Hazard?</h2>
                    </div>
                    <div class="slide-text">
                        <p>A <strong>hazard</strong> is any source of potential damage, harm, or adverse health effects on something or someone.</p>
                        <p><strong>Hazards vs. Risks:</strong> A hazard is the <strong>source</strong> of danger; risk is the <strong>likelihood</strong> of harm actually occurring. Understanding this distinction is critical for effective safety management.</p>
                        <p>Hazards exist everywhere &mdash; the key is learning to <strong>identify them</strong> before they cause harm.</p>
                        <ul class="check-list">
                            <li><strong>Physical</strong> &mdash; slips, falls, machinery, noise, temperature</li>
                            <li><strong>Chemical</strong> &mdash; toxic fumes, corrosive liquids, flammable materials</li>
                            <li><strong>Biological</strong> &mdash; pathogens, mold, bacteria, viruses</li>
                            <li><strong>Ergonomic</strong> &mdash; repetitive motion, heavy lifting, poor posture</li>
                            <li><strong>Psychosocial</strong> &mdash; stress, harassment, fatigue, violence</li>
                        </ul>
                        <div class="stat-badge">&#128200; 4,764 workers died on the job in 2020 &mdash; most from preventable hazards</div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Every accident starts with an unrecognized hazard. Train your eyes to spot them!"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 4: Physical Hazards ============ -->
        <div class="slide" data-slide="4">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 2 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon red" aria-hidden="true">&#128296;</div>
                        <h2 class="slide-title">Physical Hazards</h2>
                    </div>
                    <div class="slide-text">
                        <p><strong>Physical hazards</strong> are the most common type of workplace hazard. They include environmental factors that can cause harm without necessarily touching a substance.</p>
                        <ul class="check-list">
                            <li><strong>Slips, trips, and falls</strong> &mdash; wet floors, uneven surfaces, clutter</li>
                            <li><strong>Moving machinery and equipment</strong> &mdash; unguarded belts, gears, blades</li>
                            <li><strong>Electrical hazards</strong> &mdash; exposed wiring, overloaded circuits</li>
                            <li><strong>Noise above 85 decibels</strong> &mdash; prolonged exposure causes hearing loss</li>
                            <li><strong>Extreme temperatures</strong> &mdash; heat stress, cold stress</li>
                            <li><strong>Falling objects from heights</strong> &mdash; tools, materials, debris</li>
                            <li><strong>Confined spaces</strong> &mdash; limited entry/exit, poor ventilation</li>
                        </ul>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Look up, look down, look around &mdash; physical hazards are often hiding in plain sight!"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 5: Chemical & Biological Hazards ============ -->
        <div class="slide" data-slide="5">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 3 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon purple" aria-hidden="true">&#129514;</div>
                        <h2 class="slide-title">Chemical &amp; Biological Hazards</h2>
                    </div>
                    <div class="slide-text">
                        <div class="two-sections">
                            <div class="section-block">
                                <h4>&#9888; Chemical Hazards</h4>
                                <ul class="icon-list">
                                    <li><span class="li-icon">&#128168;</span>Toxic fumes and vapors</li>
                                    <li><span class="li-icon">&#9888;</span>Corrosive liquids (acids, solvents)</li>
                                    <li><span class="li-icon">&#128293;</span>Flammable materials</li>
                                    <li><span class="li-icon">&#127787;</span>Dust and particulates</li>
                                    <li><span class="li-icon">&#128203;</span>Always check Safety Data Sheets (SDS)</li>
                                </ul>
                            </div>
                            <div class="section-block">
                                <h4>&#129440; Biological Hazards</h4>
                                <ul class="icon-list">
                                    <li><span class="li-icon">&#129656;</span>Bloodborne pathogens</li>
                                    <li><span class="li-icon">&#129440;</span>Mold and fungi</li>
                                    <li><span class="li-icon">&#129440;</span>Bacteria and viruses</li>
                                    <li><span class="li-icon">&#128027;</span>Animal/insect bites</li>
                                    <li><span class="li-icon">&#129531;</span>Proper hygiene and PPE are essential</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="callout blue">
                        <strong>Safety Data Sheets (SDS)</strong> are your best friend &mdash; they tell you exactly what dangers a chemical poses and how to handle it safely.
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 6: Ergonomic & Psychosocial Hazards ============ -->
        <div class="slide" data-slide="6">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 4 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon teal" aria-hidden="true">&#129681;</div>
                        <h2 class="slide-title">Ergonomic &amp; Psychosocial Hazards</h2>
                    </div>
                    <div class="slide-text">
                        <div class="two-sections">
                            <div class="section-block">
                                <h4>&#129681; Ergonomic Hazards</h4>
                                <ul class="icon-list">
                                    <li><span class="li-icon">&#128260;</span>Repetitive motions</li>
                                    <li><span class="li-icon">&#127947;</span>Heavy lifting</li>
                                    <li><span class="li-icon">&#128187;</span>Poor workstation setup</li>
                                    <li><span class="li-icon">&#129485;</span>Awkward postures</li>
                                    <li><span class="li-icon">&#128243;</span>Vibrating tools</li>
                                </ul>
                            </div>
                            <div class="section-block">
                                <h4>&#129504; Psychosocial Hazards</h4>
                                <ul class="icon-list">
                                    <li><span class="li-icon">&#128548;</span>Workplace stress and burnout</li>
                                    <li><span class="li-icon">&#128545;</span>Bullying or harassment</li>
                                    <li><span class="li-icon">&#128564;</span>Long shifts/fatigue</li>
                                    <li><span class="li-icon">&#128275;</span>Lack of job control</li>
                                    <li><span class="li-icon">&#9888;</span>Violence/threat of violence</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Ergonomic injuries develop slowly but they're 100% preventable with proper setup and technique!"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 7: The Hazard Assessment Process ============ -->
        <div class="slide" data-slide="7">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 5 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon blue" aria-hidden="true">&#128203;</div>
                        <h2 class="slide-title">The Hazard Assessment Process</h2>
                    </div>
                    <div class="slide-text">
                        <p>A systematic approach to finding and fixing hazards involves <strong>five key steps</strong>:</p>
                        <ol class="num-list">
                            <li><strong>Identify Hazards</strong> &mdash; Walk the workplace, review records, talk to workers</li>
                            <li><strong>Assess the Risk</strong> &mdash; How severe? How likely? Who's exposed?</li>
                            <li><strong>Prioritize</strong> &mdash; Address the most dangerous hazards first</li>
                            <li><strong>Control the Hazard</strong> &mdash; Use the Hierarchy of Controls</li>
                            <li><strong>Monitor &amp; Review</strong> &mdash; Regularly reassess and update</li>
                        </ol>
                    </div>
                    <div class="callout gold">
                        <strong>Remember:</strong> This isn't a one-time task &mdash; hazard assessment should be ongoing and part of your daily routine.
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 8: Hierarchy of Controls ============ -->
        <div class="slide" data-slide="8">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 6 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon gold" aria-hidden="true">&#128314;</div>
                        <h2 class="slide-title">Hierarchy of Controls</h2>
                    </div>
                    <div class="slide-text">
                        <p>The <strong>Hierarchy of Controls</strong> ranks hazard control methods from <strong>most effective</strong> to <strong>least effective</strong>:</p>
                        <ol class="num-list">
                            <li><strong>Elimination</strong> &mdash; Remove the hazard completely</li>
                            <li><strong>Substitution</strong> &mdash; Replace with something less dangerous</li>
                            <li><strong>Engineering Controls</strong> &mdash; Isolate people from the hazard (guards, ventilation)</li>
                            <li><strong>Administrative Controls</strong> &mdash; Change the way people work (training, procedures, signage)</li>
                            <li><strong>PPE</strong> &mdash; Personal Protective Equipment (last resort, not first choice!)</li>
                        </ol>
                    </div>
                    <div class="callout orange">
                        <strong>&#9888; Important:</strong> PPE is the <strong>LAST</strong> line of defense, not the first! Always try to eliminate or control the hazard at its source.
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Think of it like a pyramid &mdash; start at the top for the best protection!"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 9: Conducting a Workplace Inspection ============ -->
        <div class="slide" data-slide="9">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 7 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon green" aria-hidden="true">&#128269;</div>
                        <h2 class="slide-title">Conducting a Workplace Inspection</h2>
                    </div>
                    <div class="slide-text">
                        <p>Regular inspections are essential for catching hazards early. Here's <strong>what to look for</strong> during an inspection:</p>
                        <ul class="check-list">
                            <li><strong>Housekeeping</strong> &mdash; clean, organized, clear walkways</li>
                            <li><strong>Electrical</strong> &mdash; no frayed cords, proper grounding</li>
                            <li><strong>Fire safety</strong> &mdash; extinguishers accessible, exits clear</li>
                            <li><strong>PPE</strong> &mdash; available, in good condition, being used</li>
                            <li><strong>Machine guards</strong> &mdash; in place and functional</li>
                            <li><strong>Chemical storage</strong> &mdash; properly labeled and stored</li>
                            <li><strong>Ergonomics</strong> &mdash; workstations properly set up</li>
                            <li><strong>Emergency equipment</strong> &mdash; first aid kits stocked, eyewash stations working</li>
                        </ul>
                    </div>
                    <div class="katie-tip">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <div class="katie-tip-body">
                            <div class="katie-tip-label">Katie's Tip</div>
                            <div class="katie-tip-msg">"Do a mental walk-through of your workspace right now &mdash; can you spot any hazards?"</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 10: Key Takeaways ============ -->
        <div class="slide" data-slide="10">
            <div class="slide-card">
                <div class="slide-card-body">
                    <span class="slide-badge">Slide 8 of 8</span>
                    <div class="slide-heading">
                        <div class="slide-icon gold" aria-hidden="true">&#127942;</div>
                        <h2 class="slide-title">Katie's Key Takeaways</h2>
                    </div>
                    <div class="slide-text">
                        <div style="display:flex; align-items:center; gap:16px; margin-bottom:22px;">
                            <img src="katie.png" alt="Katie" class="katie-avatar-medium">
                            <p style="font-size:16px;color:var(--text-medium);">Great job making it through the lesson! Here are the key things to remember:</p>
                        </div>
                        <div class="takeaway-grid">
                            <div class="takeaway-item">
                                <span class="takeaway-icon">&#128161;</span>
                                <span class="takeaway-text">Hazards are everywhere &mdash; train your eyes to spot them daily</span>
                            </div>
                            <div class="takeaway-item">
                                <span class="takeaway-icon">&#128161;</span>
                                <span class="takeaway-text">Use the Hierarchy of Controls: eliminate first, PPE last</span>
                            </div>
                            <div class="takeaway-item">
                                <span class="takeaway-icon">&#128161;</span>
                                <span class="takeaway-text">Report hazards immediately &mdash; don't wait for an accident</span>
                            </div>
                            <div class="takeaway-item">
                                <span class="takeaway-icon">&#128161;</span>
                                <span class="takeaway-text">Regular inspections prevent injuries before they happen</span>
                            </div>
                        </div>
                        <div class="callout green" style="margin-top:22px;text-align:center;">
                            <strong>&#127891; Great work!</strong> Now let's test your knowledge with a quick quiz.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 11: Quiz Q1 ============ -->
        <div class="slide" data-slide="11">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 1 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <div class="quiz-question-text">Which of the following is the MOST effective method of hazard control?</div>
                    <div class="quiz-options" id="q1-options" role="radiogroup" aria-label="Question 1 options">
                        <button class="quiz-option" data-q="1" data-val="A" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">A</span>
                            <span>Wearing personal protective equipment</span>
                        </button>
                        <button class="quiz-option" data-q="1" data-val="B" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">B</span>
                            <span>Posting warning signs</span>
                        </button>
                        <button class="quiz-option" data-q="1" data-val="C" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">C</span>
                            <span>Eliminating the hazard entirely</span>
                        </button>
                        <button class="quiz-option" data-q="1" data-val="D" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">D</span>
                            <span>Training workers about the hazard</span>
                        </button>
                    </div>
                    <div class="quiz-feedback" id="fb-1"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-1" disabled onclick="submitQuiz(1)">Submit Answer</button>
                    <button class="btn btn-gold" id="next-q-1" style="display:none;" onclick="goToSlide(12)">Next Question &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 12: Quiz Q2 ============ -->
        <div class="slide" data-slide="12">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 2 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <div class="quiz-question-text">What document provides detailed information about a chemical's hazards and safe handling procedures?</div>
                    <div class="quiz-options" id="q2-options" role="radiogroup" aria-label="Question 2 options">
                        <button class="quiz-option" data-q="2" data-val="A" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">A</span>
                            <span>OSHA Citation Report</span>
                        </button>
                        <button class="quiz-option" data-q="2" data-val="B" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">B</span>
                            <span>Safety Data Sheet (SDS)</span>
                        </button>
                        <button class="quiz-option" data-q="2" data-val="C" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">C</span>
                            <span>Incident Report Form</span>
                        </button>
                        <button class="quiz-option" data-q="2" data-val="D" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">D</span>
                            <span>Workers' Compensation Claim</span>
                        </button>
                    </div>
                    <div class="quiz-feedback" id="fb-2"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-2" disabled onclick="submitQuiz(2)">Submit Answer</button>
                    <button class="btn btn-gold" id="next-q-2" style="display:none;" onclick="goToSlide(13)">Next Question &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 13: Quiz Q3 ============ -->
        <div class="slide" data-slide="13">
            <div class="quiz-card">
                <div class="quiz-card-header">
                    <h2>&#10067; Knowledge Check</h2>
                    <span class="quiz-progress-badge">Question 3 of 3</span>
                </div>
                <div class="quiz-card-body">
                    <div class="quiz-question-text">Repetitive motion injuries, poor workstation setup, and heavy lifting are examples of which type of hazard?</div>
                    <div class="quiz-options" id="q3-options" role="radiogroup" aria-label="Question 3 options">
                        <button class="quiz-option" data-q="3" data-val="A" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">A</span>
                            <span>Chemical hazards</span>
                        </button>
                        <button class="quiz-option" data-q="3" data-val="B" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">B</span>
                            <span>Biological hazards</span>
                        </button>
                        <button class="quiz-option" data-q="3" data-val="C" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">C</span>
                            <span>Physical hazards</span>
                        </button>
                        <button class="quiz-option" data-q="3" data-val="D" role="radio" aria-checked="false">
                            <span class="quiz-option-letter">D</span>
                            <span>Ergonomic hazards</span>
                        </button>
                    </div>
                    <div class="quiz-feedback" id="fb-3"></div>
                </div>
                <div class="quiz-card-actions">
                    <button class="btn btn-gold" id="submit-3" disabled onclick="submitQuiz(3)">Submit Answer</button>
                    <button class="btn btn-gold" id="next-q-3" style="display:none;" onclick="goToSlide(14)">See Results &#8594;</button>
                </div>
            </div>
        </div>

        <!-- ============ SLIDE 14: RESULTS ============ -->
        <div class="slide" data-slide="14">
            <div class="results-card">
                <div class="results-header">
                    <h2>&#128202; Quiz Results</h2>
                </div>
                <div class="results-body">
                    <div class="results-icon" id="rIcon"></div>
                    <div class="results-score" id="rScore"></div>
                    <h3 class="results-title" id="rTitle"></h3>
                    <p class="results-msg" id="rMsg"></p>
                    <div class="results-btns" id="rBtns"></div>
                    <div class="results-katie">
                        <img src="katie.png" alt="Katie" class="katie-avatar-small">
                        <p id="rKatie"></p>
                    </div>
                </div>
            </div>
        </div>

    </div><!-- /slide-viewport -->

    <!-- ═══════════════════════════════════════════
         BOTTOM NAV
         ═══════════════════════════════════════════ -->
    <div class="bottom-nav" role="navigation" aria-label="Slide navigation">
        <div class="bottom-nav-inner">
            <button class="nav-btn" id="prevBtn" onclick="prevSlide()" disabled aria-label="Previous slide">&#8592; Previous</button>
            <div class="kbd-hints">
                <span class="kbd-hint"><span class="kbd">&#8592;</span> Back</span>
                <span class="nav-slide-info" id="navInfo">1 / 14</span>
                <span class="kbd-hint">Next <span class="kbd">&#8594;</span></span>
            </div>
            <button class="nav-btn next-btn" id="nextBtn" onclick="nextSlide()" aria-label="Next slide">Next &#8594;</button>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════
         JAVASCRIPT
         ═══════════════════════════════════════════ -->
    <script>
    (function() {
        'use strict';

        var TOTAL_SLIDES = 14;
        var currentSlide = 1;

        // Quiz state
        var quizAnswers = { 1: null, 2: null, 3: null };
        var quizSubmitted = { 1: false, 2: false, 3: false };
        var quizCorrectAnswers = { 1: 'C', 2: 'B', 3: 'D' };
        var quizScore = 0;

        var feedbackMessages = {
            1: {
                correct: '\u2713 Correct! Elimination is the most effective control \u2014 removing the hazard entirely is always the best option.',
                incorrect: '\u2717 Incorrect. The correct answer is C. Elimination (removing the hazard entirely) is at the top of the Hierarchy of Controls.'
            },
            2: {
                correct: '\u2713 Correct! Safety Data Sheets (SDS) contain all the critical information about chemical hazards.',
                incorrect: '\u2717 Incorrect. The correct answer is B. Safety Data Sheets (SDS) provide detailed information about chemical hazards and safe handling.'
            },
            3: {
                correct: '\u2713 Correct! These are all ergonomic hazards related to how work tasks affect the body.',
                incorrect: '\u2717 Incorrect. The correct answer is D. Repetitive motions, poor workstation setup, and heavy lifting are ergonomic hazards.'
            }
        };

        // ─── SLIDE NAVIGATION ───
        function getAllSlides() {
            return document.querySelectorAll('.slide');
        }

        function updateUI() {
            var slides = getAllSlides();
            slides.forEach(function(s) {
                var num = parseInt(s.getAttribute('data-slide'));
                s.classList.remove('active', 'exit-left');
                if (num === currentSlide) {
                    s.classList.add('active');
                }
            });

            // Progress bar
            var pct = Math.round((currentSlide / TOTAL_SLIDES) * 100);
            document.getElementById('progressFill').style.width = pct + '%';
            document.getElementById('progressLabel').textContent = 'Slide ' + currentSlide + ' of ' + TOTAL_SLIDES;
            document.getElementById('progressPct').textContent = pct + '%';
            document.getElementById('navInfo').textContent = currentSlide + ' / ' + TOTAL_SLIDES;

            var progressTrack = document.querySelector('.progress-track');
            if (progressTrack) progressTrack.setAttribute('aria-valuenow', pct);

            // Nav buttons
            document.getElementById('prevBtn').disabled = (currentSlide <= 1);
            document.getElementById('nextBtn').disabled = (currentSlide >= TOTAL_SLIDES);

            // Scroll slide body to top if needed
            var activeSlide = document.querySelector('.slide.active');
            if (activeSlide) {
                var scrollable = activeSlide.querySelector('.slide-card-body');
                if (scrollable) scrollable.scrollTop = 0;
            }

            // Save current slide to localStorage
            saveSlideProgress();
        }

        window.goToSlide = function(num) {
            if (num < 1 || num > TOTAL_SLIDES) return;
            if (num === 14) buildResults();
            currentSlide = num;
            updateUI();
        };

        window.nextSlide = function() {
            if (currentSlide < TOTAL_SLIDES) {
                goToSlide(currentSlide + 1);
            }
        };

        window.prevSlide = function() {
            if (currentSlide > 1) {
                goToSlide(currentSlide - 1);
            }
        };

        // ─── KEYBOARD NAV ───
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            if (e.key === 'ArrowRight' || e.key === 'Right') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft' || e.key === 'Left') {
                e.preventDefault();
                prevSlide();
            }
        });

        // ─── QUIZ OPTION SELECTION ───
        document.querySelectorAll('.quiz-option').forEach(function(opt) {
            opt.addEventListener('click', function() {
                var qNum = parseInt(this.getAttribute('data-q'));
                if (quizSubmitted[qNum]) return;

                // Deselect siblings
                var container = document.getElementById('q' + qNum + '-options');
                container.querySelectorAll('.quiz-option').forEach(function(o) {
                    o.classList.remove('selected');
                    o.setAttribute('aria-checked', 'false');
                });

                this.classList.add('selected');
                this.setAttribute('aria-checked', 'true');
                quizAnswers[qNum] = this.getAttribute('data-val');

                document.getElementById('submit-' + qNum).disabled = false;
            });
        });

        // ─── QUIZ SUBMIT ───
        window.submitQuiz = function(qNum) {
            if (quizSubmitted[qNum]) return;
            quizSubmitted[qNum] = true;

            var userAnswer = quizAnswers[qNum];
            var correctAnswer = quizCorrectAnswers[qNum];
            var isCorrect = (userAnswer === correctAnswer);
            var container = document.getElementById('q' + qNum + '-options');

            // Mark options
            container.querySelectorAll('.quiz-option').forEach(function(opt) {
                opt.classList.add('disabled');
                var val = opt.getAttribute('data-val');
                if (val === correctAnswer) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected') && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            // Show feedback
            var fb = document.getElementById('fb-' + qNum);
            if (isCorrect) {
                fb.textContent = feedbackMessages[qNum].correct;
                fb.className = 'quiz-feedback show correct-fb';
                quizScore++;
            } else {
                fb.textContent = feedbackMessages[qNum].incorrect;
                fb.className = 'quiz-feedback show incorrect-fb';
            }

            // Toggle buttons
            document.getElementById('submit-' + qNum).style.display = 'none';
            document.getElementById('next-q-' + qNum).style.display = '';
        };

        // ─── BUILD RESULTS ───
        function buildResults() {
            var icon = document.getElementById('rIcon');
            var score = document.getElementById('rScore');
            var title = document.getElementById('rTitle');
            var msg = document.getElementById('rMsg');
            var btns = document.getElementById('rBtns');
            var katie = document.getElementById('rKatie');

            score.textContent = quizScore + ' / 3';

            if (quizScore === 3) {
                icon.textContent = '\uD83C\uDF89';
                title.textContent = 'Perfect Score!';
                msg.textContent = 'You\'re a hazard recognition expert! You can spot dangers before they become accidents.';
                btns.innerHTML = '<button class="btn btn-success" onclick="completeModule()">\u2713 Complete Module & Return to Hub</button>';
                katie.textContent = '"Outstanding work! You\'ve got the eyes of a safety pro!"';
            } else if (quizScore >= 2) {
                icon.textContent = '\u2705';
                title.textContent = 'You Passed!';
                msg.textContent = 'Good understanding of hazard recognition. You demonstrated solid knowledge of identifying and controlling workplace hazards.';
                btns.innerHTML = '<button class="btn btn-success" onclick="completeModule()">\u2713 Complete Module & Return to Hub</button>';
                katie.textContent = '"Great work! You know how to spot hazards and keep your workplace safe!"';
            } else {
                icon.textContent = '\uD83D\uDCDA';
                title.textContent = 'Not Quite Yet';
                msg.textContent = 'You need 2 out of 3 correct to pass this module. Review the lesson and try again!';
                btns.innerHTML = '<button class="btn btn-gold" onclick="retakeQuiz()">\u21BB Retake Quiz</button>' +
                    '<button class="btn btn-outline" onclick="goToSlide(3)">\u2191 Review Lesson</button>';
                katie.textContent = '"Don\'t worry! Review the slides and give it another try. You\'ve got this!"';
            }

            saveQuizProgress();
        }

        // ─── RETAKE QUIZ ───
        window.retakeQuiz = function() {
            quizAnswers = { 1: null, 2: null, 3: null };
            quizSubmitted = { 1: false, 2: false, 3: false };
            quizScore = 0;

            for (var q = 1; q <= 3; q++) {
                var container = document.getElementById('q' + q + '-options');
                container.querySelectorAll('.quiz-option').forEach(function(opt) {
                    opt.classList.remove('selected', 'correct', 'incorrect', 'disabled');
                    opt.setAttribute('aria-checked', 'false');
                });

                document.getElementById('fb-' + q).className = 'quiz-feedback';
                document.getElementById('fb-' + q).textContent = '';
                document.getElementById('submit-' + q).style.display = '';
                document.getElementById('submit-' + q).disabled = true;
                document.getElementById('next-q-' + q).style.display = 'none';
            }

            goToSlide(11);
        };

        // ─── LOCAL STORAGE ───
        function getProgress() {
            try {
                var d = localStorage.getItem('safetyverse-progress');
                return d ? JSON.parse(d) : {};
            } catch(e) { return {}; }
        }

        // ─── SUPABASE SYNC ───
        var MODULE_NAME = 'Hazard Recognition';
        var SB_URL = 'https://cfuupedcjroqarmgqcyn.supabase.co';
        var SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmdXVwZWRjanJvcWFybWdxY3luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzNjQ1ODksImV4cCI6MjA4Njk0MDU4OX0.kHqVQPBCljGhk8lkd_LN4JxhT1ywOIKapXKmJZD1LEo';
        var _sbClient = null;
        function getSB() {
            if (!_sbClient && window.supabase) _sbClient = window.supabase.createClient(SB_URL, SB_KEY);
            return _sbClient;
        }
        function syncProgressToSupabase(completed, score, attempts) {
            try {
                var sb = getSB();
                if (!sb) return;
                var empName = localStorage.getItem('safetyverse-username') || 'Demo User';
                var dept = localStorage.getItem('safetyverse-department') || 'Unassigned';
                var moduleSlug = 'hazard-recognition';
                var row = {
                    employee_name: empName,
                    department: dept,
                    module_slug: moduleSlug,
                    module_name: MODULE_NAME,
                    completed: !!completed,
                    quiz_score: score || 0,
                    attempts: attempts || 0,
                    last_activity: new Date().toISOString(),
                    updated_at: new Date().toISOString()
                };
                if (completed) row.completed_at = new Date().toISOString();
                sb.from('module_progress')
                    .upsert(row, { onConflict: 'employee_name,module_slug' })
                    .then(function(res) {
                        if (res.error) console.warn('Supabase sync error:', res.error.message);
                    });
            } catch(e) { console.warn('Supabase sync failed:', e); }
        }

        function saveSlideProgress() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules['hazard-recognition']) {
                    p.modules['hazard-recognition'] = { completed: false, quizScore: 0, attempts: 0, lastAttempt: null };
                }
                p.modules['hazard-recognition'].currentSlide = currentSlide;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
            } catch(e) {}
        }

        function saveQuizProgress() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules['hazard-recognition']) {
                    p.modules['hazard-recognition'] = { completed: false, quizScore: 0, attempts: 0 };
                }
                var mod = p.modules['hazard-recognition'];
                mod.quizScore = quizScore;
                mod.attempts = (mod.attempts || 0) + 1;
                mod.lastAttempt = new Date().toISOString();
                if (quizScore >= 2) mod.completed = true;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
                syncProgressToSupabase(quizScore >= 2, quizScore, mod.attempts);
            } catch(e) {}
        }

        window.completeModule = function() {
            try {
                var p = getProgress();
                if (!p.modules) p.modules = {};
                if (!p.modules['hazard-recognition']) {
                    p.modules['hazard-recognition'] = { quizScore: 0, attempts: 0 };
                }
                p.modules['hazard-recognition'].completed = true;
                p.modules['hazard-recognition'].completedAt = new Date().toISOString();
                p.modules['hazard-recognition'].quizScore = quizScore;
                localStorage.setItem('safetyverse-progress', JSON.stringify(p));
                syncProgressToSupabase(true, quizScore, (p.modules['hazard-recognition'] && p.modules['hazard-recognition'].attempts) || 1);
            } catch(e) {}
            window.location.href = '../../user-dashboard/index.html';
        };

        // ─── RESTORE PROGRESS ON LOAD ───
        function restoreProgress() {
            try {
                var p = getProgress();
                if (p.modules && p.modules['hazard-recognition']) {
                    var mod = p.modules['hazard-recognition'];
                    // If completed, show a badge on slide 1
                    if (mod.completed) {
                        var introCard = document.querySelector('.intro-card');
                        if (introCard) {
                            var badge = document.createElement('div');
                            badge.style.cssText = 'position:absolute;top:20px;right:20px;background:var(--success);color:white;font-size:12px;font-weight:700;padding:5px 16px;border-radius:20px;z-index:5;';
                            badge.textContent = '\u2713 Completed';
                            introCard.appendChild(badge);
                        }
                    }
                }
            } catch(e) {}
        }

        // ─── INIT ───
        restoreProgress();
        updateUI();

    })();
    </script>

</body>
</html>